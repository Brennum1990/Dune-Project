import{S as Oa,E as Da,o as Ma,a as ka,r as c,B as Ra,d as lo,g as uo,j as i,F as W,D as Ta,u as Tt,b as jt,i as de,e as po,s as B,f as L,_ as ja,P as qe,h as ke,k as Fe,l as Pt,m as Re,n as V,p as Aa,q as w,t as ho,v as fo,w as Xe,x as Na,y as Te,z as ge,A as St,C as La,G as Fa,H as za,I as Ba,J as Wa,K as Oe,L as Va,M as U,N as Ua,O as At,Q as Nt,R as ve,T as Ha,U as $a,V as fn,W as Ga,X as Ya,Y as Ka,Z as ue,$,a0 as k,a1 as j,a2 as be,a3 as oe,a4 as Lt,a5 as mo,a6 as qa,a7 as ce,a8 as Xa,a9 as Ja,aa as je,ab as Ft,ac as go,ad as De,ae as Qa,af as Pe,ag as Je,ah as Za,ai as vo,aj as er,ak as tr,al as nr,am as Ae,an as or,ao as xe,ap as Ne,aq as ar,ar as Qe,as as rr,at as bo,au as ir,av as sr,aw as cr,ax as yo,ay as lr,az as zt,aA as mn,aB as ur,aC as Bt,aD as dr,aE as pr,aF as Et,aG as _o,aH as hr,aI as fr,aJ as mr,aK as gr,aL as vr,aM as br,aN as yr,aO as _r,aP as le,aQ as Ze,aR as xo,aS as et,aT as Po,aU as se,aV as xr,aW as Wt,aX as Vt,aY as Pr,aZ as Sr,a_ as So,a$ as Er,b0 as wr,b1 as Cr,b2 as Eo,b3 as wo,b4 as gn,b5 as Ir,b6 as Or,b7 as Co,b8 as Dr,b9 as Io,ba as wt,bb as Mr,bc as kr,bd as Rr,be as Oo,bf as Do,bg as Tr,bh as jr,bi as Ar,bj as Mo,bk as Nr,bl as Lr,bm as ko,bn as Ut,bo as Fr,bp as ft,bq as zr,br as Br,bs as Wr,bt as vn,bu as Vr,bv as Ur,bw as mt,bx as Hr,by as Ct,bz as It,bA as Ro,bB as $r,bC as Gr,bD as Yr,bE as Kr,bF as qr,bG as Xr,bH as Jr,bI as Ht,bJ as Qr,bK as Zr,bL as ei,bM as ti,bN as ni,bO as oi,bP as ai,bQ as ri,bR as ii,bS as si,bT as Ot,bU as To,bV as ci,bW as li,bX as ui,bY as di,bZ as pi,b_ as Dt,b$ as hi,c0 as fi,c1 as mi,c2 as gt,c3 as bn,c4 as gi,c5 as vi,c6 as jo,c7 as bi,c8 as yi,c9 as _i,ca as xi,cb as vt,cc as yn,cd as Pi,ce as _n,cf as Si}from"./sanity-44d5c817.js";function Ao(t,e){var n=typeof e=="object";return new Promise(function(o,a){var r=new Oa({next:function(s){o(s),r.unsubscribe()},error:a,complete:function(){n?o(e.defaultValue):a(new Da)}});t.subscribe(r)})}function Ei(){return Ma(function(t,e){var n,o=!1;t.subscribe(ka(e,function(a){var r=n;n=a,o&&e.next([r,a]),o=!0}))})}function wi(t,e){var n=c.useCallback(function(){var s=new Ra(t),u=s.asObservable().pipe(lo());return[e?u.pipe(e):u,s]},[]),o=c.useRef();o.current||(o.current=n());var a=o.current[0];c.useEffect(function(){if(o.current){var s=o.current,u=s[1];u.next(t)}},[t,o]);var r=c.useRef(!1);return c.useEffect(function(){return r.current&&(o.current||(o.current=n()),r.current=!1),function(){if(o.current){r.current=!0;var s=o.current,u=s[1];u.complete(),o.current=void 0}}},[]),a}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var xn=Object.getOwnPropertySymbols,Ci=Object.prototype.hasOwnProperty,Ii=Object.prototype.propertyIsEnumerable;function Oi(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Di(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(r){return e[r]});if(o.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Mi=Di()?Object.assign:function(t,e){for(var n,o=Oi(t),a,r=1;r<arguments.length;r++){n=Object(arguments[r]);for(var s in n)Ci.call(n,s)&&(o[s]=n[s]);if(xn){a=xn(n);for(var u=0;u<a.length;u++)Ii.call(n,a[u])&&(o[a[u]]=n[a[u]])}}return o},ze=Mi,ki={};function ne(t,e,n,o,a,r,s,u){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,a,r,s,u],p=0;l=new Error(e.replace(/%s/g,function(){return d[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var Pn="mixins";function Ri(t,e,n){var o=[],a={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},r={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},s={displayName:function(m,f){m.displayName=f},mixins:function(m,f){if(f)for(var v=0;v<f.length;v++)l(m,f[v])},childContextTypes:function(m,f){m.childContextTypes=ze({},m.childContextTypes,f)},contextTypes:function(m,f){m.contextTypes=ze({},m.contextTypes,f)},getDefaultProps:function(m,f){m.getDefaultProps?m.getDefaultProps=h(m.getDefaultProps,f):m.getDefaultProps=f},propTypes:function(m,f){m.propTypes=ze({},m.propTypes,f)},statics:function(m,f){d(m,f)},autobind:function(){}};function u(m,f){var v=a.hasOwnProperty(f)?a[f]:null;_.hasOwnProperty(f)&&ne(v==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",f),m&&ne(v==="DEFINE_MANY"||v==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",f)}function l(m,f){if(f){ne(typeof f!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),ne(!e(f),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var v=m.prototype,O=v.__reactAutoBindPairs;f.hasOwnProperty(Pn)&&s.mixins(m,f.mixins);for(var S in f)if(f.hasOwnProperty(S)&&S!==Pn){var I=f[S],D=v.hasOwnProperty(S);if(u(D,S),s.hasOwnProperty(S))s[S](m,I);else{var R=a.hasOwnProperty(S),F=typeof I=="function",T=F&&!R&&!D&&f.autobind!==!1;if(T)O.push(S,I),v[S]=I;else if(D){var N=a[S];ne(R&&(N==="DEFINE_MANY_MERGED"||N==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",N,S),N==="DEFINE_MANY_MERGED"?v[S]=h(v[S],I):N==="DEFINE_MANY"&&(v[S]=y(v[S],I))}else v[S]=I}}}}function d(m,f){if(f)for(var v in f){var O=f[v];if(f.hasOwnProperty(v)){var S=v in s;ne(!S,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',v);var I=v in m;if(I){var D=r.hasOwnProperty(v)?r[v]:null;ne(D==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",v),m[v]=h(m[v],O);return}m[v]=O}}}function p(m,f){ne(m&&f&&typeof m=="object"&&typeof f=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var v in f)f.hasOwnProperty(v)&&(ne(m[v]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",v),m[v]=f[v]);return m}function h(m,f){return function(){var O=m.apply(this,arguments),S=f.apply(this,arguments);if(O==null)return S;if(S==null)return O;var I={};return p(I,O),p(I,S),I}}function y(m,f){return function(){m.apply(this,arguments),f.apply(this,arguments)}}function g(m,f){var v=f.bind(m);return v}function x(m){for(var f=m.__reactAutoBindPairs,v=0;v<f.length;v+=2){var O=f[v],S=f[v+1];m[O]=g(m,S)}}var P={componentDidMount:function(){this.__isMounted=!0}},C={componentWillUnmount:function(){this.__isMounted=!1}},_={replaceState:function(m,f){this.updater.enqueueReplaceState(this,m,f)},isMounted:function(){return!!this.__isMounted}},b=function(){};ze(b.prototype,t.prototype,_);function E(m){var f=function(O,S,I){this.__reactAutoBindPairs.length&&x(this),this.props=O,this.context=S,this.refs=ki,this.updater=I||n,this.state=null;var D=this.getInitialState?this.getInitialState():null;ne(typeof D=="object"&&!Array.isArray(D),"%s.getInitialState(): must return an object or null",f.displayName||"ReactCompositeComponent"),this.state=D};f.prototype=new b,f.prototype.constructor=f,f.prototype.__reactAutoBindPairs=[],o.forEach(l.bind(null,f)),l(f,P),l(f,m),l(f,C),f.getDefaultProps&&(f.defaultProps=f.getDefaultProps()),ne(f.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var v in a)f.prototype[v]||(f.prototype[v]=null);return f}return E}var Ti=Ri,Ge=c,ji=Ti;if(typeof Ge>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var Ai=new Ge.Component().updater,tt=ji(Ge.Component,Ge.isValidElement,Ai),Ni=Date.now||Li;function Li(){return new Date().getTime()}var Sn=Ni,Fi=function(e,n,o){var a,r,s,u,l;n==null&&(n=100);function d(){var p=Sn()-u;p<n&&p>0?a=setTimeout(d,n-p):(a=null,o||(l=e.apply(s,r),a||(s=r=null)))}return function(){s=this,r=arguments,u=Sn();var h=o&&!a;return a||(a=setTimeout(d,n)),h&&(l=e.apply(s,r),s=r=null),l}},zi=Bi;function Bi(t){for(var e=Wi(t),n=1732584193,o=-271733879,a=-1732584194,r=271733878,s=0;s<e.length;s+=16){var u=n,l=o,d=a,p=r;n=K(n,o,a,r,e[s+0],7,-680876936),r=K(r,n,o,a,e[s+1],12,-389564586),a=K(a,r,n,o,e[s+2],17,606105819),o=K(o,a,r,n,e[s+3],22,-1044525330),n=K(n,o,a,r,e[s+4],7,-176418897),r=K(r,n,o,a,e[s+5],12,1200080426),a=K(a,r,n,o,e[s+6],17,-1473231341),o=K(o,a,r,n,e[s+7],22,-45705983),n=K(n,o,a,r,e[s+8],7,1770035416),r=K(r,n,o,a,e[s+9],12,-1958414417),a=K(a,r,n,o,e[s+10],17,-42063),o=K(o,a,r,n,e[s+11],22,-1990404162),n=K(n,o,a,r,e[s+12],7,1804603682),r=K(r,n,o,a,e[s+13],12,-40341101),a=K(a,r,n,o,e[s+14],17,-1502002290),o=K(o,a,r,n,e[s+15],22,1236535329),n=q(n,o,a,r,e[s+1],5,-165796510),r=q(r,n,o,a,e[s+6],9,-1069501632),a=q(a,r,n,o,e[s+11],14,643717713),o=q(o,a,r,n,e[s+0],20,-373897302),n=q(n,o,a,r,e[s+5],5,-701558691),r=q(r,n,o,a,e[s+10],9,38016083),a=q(a,r,n,o,e[s+15],14,-660478335),o=q(o,a,r,n,e[s+4],20,-405537848),n=q(n,o,a,r,e[s+9],5,568446438),r=q(r,n,o,a,e[s+14],9,-1019803690),a=q(a,r,n,o,e[s+3],14,-187363961),o=q(o,a,r,n,e[s+8],20,1163531501),n=q(n,o,a,r,e[s+13],5,-1444681467),r=q(r,n,o,a,e[s+2],9,-51403784),a=q(a,r,n,o,e[s+7],14,1735328473),o=q(o,a,r,n,e[s+12],20,-1926607734),n=X(n,o,a,r,e[s+5],4,-378558),r=X(r,n,o,a,e[s+8],11,-2022574463),a=X(a,r,n,o,e[s+11],16,1839030562),o=X(o,a,r,n,e[s+14],23,-35309556),n=X(n,o,a,r,e[s+1],4,-1530992060),r=X(r,n,o,a,e[s+4],11,1272893353),a=X(a,r,n,o,e[s+7],16,-155497632),o=X(o,a,r,n,e[s+10],23,-1094730640),n=X(n,o,a,r,e[s+13],4,681279174),r=X(r,n,o,a,e[s+0],11,-358537222),a=X(a,r,n,o,e[s+3],16,-722521979),o=X(o,a,r,n,e[s+6],23,76029189),n=X(n,o,a,r,e[s+9],4,-640364487),r=X(r,n,o,a,e[s+12],11,-421815835),a=X(a,r,n,o,e[s+15],16,530742520),o=X(o,a,r,n,e[s+2],23,-995338651),n=J(n,o,a,r,e[s+0],6,-198630844),r=J(r,n,o,a,e[s+7],10,1126891415),a=J(a,r,n,o,e[s+14],15,-1416354905),o=J(o,a,r,n,e[s+5],21,-57434055),n=J(n,o,a,r,e[s+12],6,1700485571),r=J(r,n,o,a,e[s+3],10,-1894986606),a=J(a,r,n,o,e[s+10],15,-1051523),o=J(o,a,r,n,e[s+1],21,-2054922799),n=J(n,o,a,r,e[s+8],6,1873313359),r=J(r,n,o,a,e[s+15],10,-30611744),a=J(a,r,n,o,e[s+6],15,-1560198380),o=J(o,a,r,n,e[s+13],21,1309151649),n=J(n,o,a,r,e[s+4],6,-145523070),r=J(r,n,o,a,e[s+11],10,-1120210379),a=J(a,r,n,o,e[s+2],15,718787259),o=J(o,a,r,n,e[s+9],21,-343485551),n=ie(n,u),o=ie(o,l),a=ie(a,d),r=ie(r,p)}return Be(n)+Be(o)+Be(a)+Be(r)}var En="0123456789abcdef";function $t(t,e){var n=t&1|e&1,o=t>>>1|e>>>1;return o<<1|n}function Mt(t,e){var n=t&1^e&1,o=t>>>1^e>>>1;return o<<1|n}function Ye(t,e){var n=t&1&(e&1),o=t>>>1&e>>>1;return o<<1|n}function ie(t,e){var n=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(n>>16);return o<<16|n&65535}function Be(t){var e="",n;for(n=0;n<=3;n++)e+=En.charAt(t>>n*8+4&15)+En.charAt(t>>n*8&15);return e}function Wi(t){var e=(t.length+8>>6)+1,n=new Array(e*16),o;for(o=0;o<e*16;o++)n[o]=0;for(o=0;o<t.length;o++)n[o>>2]|=t.charCodeAt(o)<<(t.length*8+o)%4*8;n[o>>2]|=128<<(t.length*8+o)%4*8;var a=t.length*8;return n[e*16-2]=a&255,n[e*16-2]|=(a>>>8&255)<<8,n[e*16-2]|=(a>>>16&255)<<16,n[e*16-2]|=(a>>>24&255)<<24,n}function Vi(t,e){return t<<e|t>>>32-e}function nt(t,e,n,o,a,r){return ie(Vi(ie(ie(e,t),ie(o,r)),a),n)}function K(t,e,n,o,a,r,s){return nt($t(Ye(e,n),Ye(~e,o)),t,e,a,r,s)}function q(t,e,n,o,a,r,s){return nt($t(Ye(e,o),Ye(n,~o)),t,e,a,r,s)}function X(t,e,n,o,a,r,s){return nt(Mt(Mt(e,n),o),t,e,a,r,s)}function J(t,e,n,o,a,r,s){return nt(Mt(n,$t(e,~o)),t,e,a,r,s)}var Ui=Math.ceil(Math.random()*10),Hi=function(){return++Ui},Gt=function(t){return Object.prototype.toString.call(t).slice(8,-1)},$i=Gt;function Gi(t){var e=$i(t);return e!=="Object"&&e!=="Array"}var No=Gi,Yi=c,Ki=tt,We=Yi.createElement,qi=Ki({getDefaultProps:function(){return{string:"",highlight:""}},shouldComponentUpdate:function(t){return t.highlight!==this.props.highlight},render:function(){var t=this.props,e=t.string.search(t.highlight);if(!t.highlight||e===-1)return We("span",null,t.string);var n=t.highlight.source.length,o=t.string.substr(e,n);return We("span",null,t.string.split(t.highlight).map(function(a,r){return We("span",{key:r},r>0?We("span",{className:"json-inspector__hl"},o):null,a)}))}}),Xi=c,Ji=tt,Qi=zi,Zi=Hi,Lo=Gt,Ve=No,es=qi,ee=Xi.createElement,ts=".root.",Fo=Ji({getInitialState:function(){return{expanded:this._isInitiallyExpanded(this.props)}},getDefaultProps:function(){return{root:!1,prefix:""}},render:function(){var t="id_"+Zi(),e=this.props,n={path:this.keypath(),key:e.label.toString(),value:e.data},o=this._onClick.bind(this,n);return ee("div",{className:this.getClassName(),id:"leaf-"+this._rootPath()},ee("input",{className:"json-inspector__radio",type:"radio",name:e.id,id:t,tabIndex:-1}),ee("label",{className:"json-inspector__line",htmlFor:t,onClick:o},ee("div",{className:"json-inspector__flatpath"},n.path),ee("span",{className:"json-inspector__key"},this.format(n.key),":",this.renderInteractiveLabel(n.key,!0)),this.renderTitle(),this.renderShowOriginalButton()),this.renderChildren())},renderTitle:function(){var t=this.data(),e=Lo(t);switch(e){case"Array":var n=t.length;return ee("span",{className:"json-inspector__value json-inspector__value_helper"},(n>0?"[…] ":"[] ")+ns(n));case"Object":var o=Object.keys(t).length;return ee("span",{className:"json-inspector__value json-inspector__value_helper"},(o>0?"{…} ":"{} ")+os(o));default:return ee("span",{className:"json-inspector__value json-inspector__value_"+e.toLowerCase()},this.format(String(t)),this.renderInteractiveLabel(t,!1))}},renderChildren:function(){var t=this.props,e=this._rootPath(),n=this.data();return this.state.expanded&&!Ve(n)?Object.keys(n).map(function(o){var a=n[o],r=!this.state.original||(t.verboseShowOriginal?t.query:!1);return ee(Fo,{data:a,label:o,prefix:e,onClick:t.onClick,id:t.id,query:t.query,getOriginal:r?t.getOriginal:null,key:as(o,a),isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal})},this):null},renderShowOriginalButton:function(){var t=this.props;return Ve(t.data)||this.state.original||!t.getOriginal||!t.query||bt(this.keypath(),t.query)?null:ee("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})},renderInteractiveLabel:function(t,e){return typeof this.props.interactiveLabel=="function"?ee(this.props.interactiveLabel,{value:String(t),originalValue:t,isKey:e,keypath:this.keypath()}):null},componentWillReceiveProps:function(t){t.query&&this.setState({expanded:!bt(t.label,t.query)}),this.props.query&&!t.query&&this.setState({expanded:this._isInitiallyExpanded(t)})},_rootPath:function(){return this.props.prefix+"."+this.props.label},keypath:function(){return this._rootPath().substr(ts.length)},data:function(){return this.state.original||this.props.data},format:function(t){return ee(es,{string:t,highlight:this.props.query})},getClassName:function(){var t="json-inspector__leaf";return this.props.root&&(t+=" json-inspector__leaf_root"),this.state.expanded&&(t+=" json-inspector__leaf_expanded"),Ve(this.props.data)||(t+=" json-inspector__leaf_composite"),t},toggle:function(){this.setState({expanded:!this.state.expanded})},_onClick:function(t,e){this.toggle(),this.props.onClick(t),e.stopPropagation()},_onShowOriginalClick:function(t){this.setState({original:this.props.getOriginal(this.keypath())}),t.stopPropagation()},_isInitiallyExpanded:function(t){var e=this.keypath();return t.root?!0:t.query?!bt(e,t.query)&&typeof t.getOriginal=="function":t.isExpanded(e,t.data)}});function ns(t){return t+(t===1?" item":" items")}function os(t){return t+(t===1?" property":" properties")}function as(t,e){if(Ve(e)){var n=Qi(String(e));return t+":"+n}else return t+"["+Lo(e)+"]"}function bt(t,e){return t.indexOf(e)!==-1}var rs=Fo,zo=function(){},is=c,ss=tt,cs=is.createElement,ls=zo,us=ss({getDefaultProps:function(){return{onChange:ls}},render:function(){return cs("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:this.onChange})},onChange:function(t){this.props.onChange(t.target.value)}}),Bo=function(t){return Object.keys(t).length===0},ds=Object.keys,ps=No,hs=Bo,fs=function(t,e){e||(e={cacheResults:!0});var n={};return function(o){if(!e.cacheResults)return Ue(t,o,e);var a;if(!n[o]){for(var r=o.length-1;r>0;r-=1)if(a=o.substr(0,r),n[a]){n[o]=Ue(n[a],o,e);break}}return n[o]||(n[o]=Ue(t,o,e)),n[o]}};function Ue(t,e,n){return ds(t).reduce(function(o,a){var r=t[a],s;return ps(r)?(yt(e,a,n)||yt(e,r,n))&&(o[a]=r):yt(e,a,n)?o[a]=r:(s=Ue(r,e,n),hs(s)||Object.assign(o,ms(a,s))),o},{})}function yt(t,e,n){if(e){var o=String(e),a=t;return n.ignoreCase&&(o=o.toLowerCase(),a=a.toLowerCase()),o.indexOf(a)!==-1}}function ms(t,e){var n={};return n[t]=e,n}var gs=Gt,_t=".";function kt(t,e){var n=e.split(_t),o=n.shift();if(!o)return t;var a=gs(t);if(a==="Array"&&t[wn(o)])return kt(t[wn(o)],n.join(_t));if(a==="Object"&&t[o])return kt(t[o],n.join(_t))}function wn(t){return parseInt(t,10)}var vs=kt,bs=c,ys=tt,_s=Fi,Ie=bs.createElement,xs=rs,Ps=us,Ss=fs,Es=Bo,ws=vs,Cs=zo,Is=ys({getDefaultProps:function(){return{data:null,search:Ps,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:Cs,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(t){return t.length>=2},isExpanded:function(t,e){return!1},verboseShowOriginal:!1}},getInitialState:function(){return{query:this.props.query||""}},render:function(){var t=this.props,e=this.state,n=e.query!==""&&t.validateQuery(e.query),o=n?e.filterer(e.query):t.data,a=n&&Es(o);return Ie("div",{className:"json-inspector "+t.className},this.renderToolbar(),a?Ie("div",{className:"json-inspector__not-found"},"Nothing found"):Ie(xs,{data:o,onClick:t.onClick,id:t.id,getOriginal:this.getOriginal,query:n?new RegExp(e.query,t.filterOptions.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:t.isExpanded,interactiveLabel:t.interactiveLabel,verboseShowOriginal:t.verboseShowOriginal}))},renderToolbar:function(){var t=this.props.search;if(t)return Ie("div",{className:"json-inspector__toolbar"},Ie(t,{onChange:_s(this.search,this.props.searchOptions.debounceTime),data:this.props.data,query:this.state.query}))},search:function(t){this.setState({query:t})},componentWillMount:function(){this.createFilterer(this.props.data,this.props.filterOptions)},componentWillReceiveProps:function(t){this.createFilterer(t.data,t.filterOptions);var e=typeof t.query=="string"&&t.query!==this.state.query;e&&this.setState({query:t.query})},shouldComponentUpdate:function(t,e){return t.query!==this.props.query||e.query!==this.state.query||t.data!==this.props.data||t.onClick!==this.props.onClick},createFilterer:function(t,e){this.setState({filterer:Ss(t,e)})},getOriginal:function(t){return ws(this.props.data,t)}});const Os=uo(Is);var Ds=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,n=Object.create(null),o=Object.create(null);function a(r,s){n[r]=s,e++,e>=t&&(e=0,o=n,n=Object.create(null))}return{has:function(r){return n[r]!==void 0||o[r]!==void 0},remove:function(r){n[r]!==void 0&&(n[r]=void 0),o[r]!==void 0&&(o[r]=void 0)},get:function(r){var s=n[r];if(s!==void 0)return s;if((s=o[r])!==void 0)return a(r,s),s},set:function(r,s){n[r]!==void 0?n[r]=s:a(r,s)},clear:function(){n=Object.create(null),o=Object.create(null)}}};const Ms=uo(Ds);var Cn,In,On,Dn,Mn,kn,Rn,Tn,jn,An,Nn,Ln,Fn,zn,Bn,Wn,Vn,Un,Hn,$n,Gn,Yn,Kn,qn,Xn,Jn;function z(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Wo(t){let{children:e,ms:n=0}=t;const[o,a]=c.useState(n<=0);return c.useEffect(()=>{if(n<=0)return;const r=setTimeout(()=>a(!0),n);return()=>{clearTimeout(r)}},[n]),!o||!e?i(W,{}):typeof e=="function"?e():e}const Yt=t=>{const{actions:e,children:n,actionProps:o,onActionComplete:a}=t;return i(_o,{onReset:a,hooks:e,args:o,children:n})},ks=t=>{const{badges:e,children:n,badgeProps:o,...a}=t;return i(_o,{...a,hooks:e,args:o,children:n})},Rs=[];function Ts(t){const{children:e,flatIndex:n,index:o,params:a,payload:r,siblingIndex:s}=t,{navigate:u,navigateIntent:l}=Tt(),d=jt(),p=c.useMemo(()=>(d==null?void 0:d.panes)||Rs,[d==null?void 0:d.panes]),h=o-1,y=c.useCallback(_=>{const b=p[h]||[],E=b[s],m=_(b,E),f=[...p.slice(0,h),m,...p.slice(h+1)],v={...d||{},panes:f};return setTimeout(()=>u(v),0),v},[h,u,p,d,s]),g=c.useCallback(_=>{y((b,E)=>[...b.slice(0,s),{...E,payload:_},...b.slice(s+1)])},[y,s]),x=c.useCallback(_=>{y((b,E)=>[...b.slice(0,s),{...E,params:_},...b.slice(s+1)])},[y,s]),P=c.useCallback(_=>{let{id:b,parentRefPath:E,type:m,template:f}=_;u({panes:[...p.slice(0,h+1),[{id:b,params:{template:f.id,parentRefPath:hr(E),type:m},payload:f.params}]]})},[h,u,p]),C=c.useMemo(()=>({index:n,groupIndex:h,siblingIndex:s,payload:r,params:a,hasGroupSiblings:p[h]?p[h].length>1:!1,groupLength:p[h]?p[h].length:0,routerPanesState:p,ChildLink:fr,BackLink:mr,ReferenceChildLink:gr,handleEditReference:P,ParameterizedLink:vr,replaceCurrent:function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};y(()=>[{id:_.id||"",payload:_.payload,params:_.params||{}}])},closeCurrent:()=>{y((_,b)=>_.length>1?_.filter(E=>E!==b):_)},duplicateCurrent:_=>{y((b,E)=>{const m={...E,payload:(_==null?void 0:_.payload)||E.payload,params:(_==null?void 0:_.params)||E.params};return[...b.slice(0,s),m,...b.slice(s)]})},setView:_=>{const b=At(a,"view");return x(_?{...b,view:_}:b)},setParams:x,setPayload:g,navigateIntent:l}),[n,h,P,y,l,a,r,p,x,g,s]);return i(br.Provider,{value:C,children:e})}function js(t,e,n,o){var a,r;const s={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},u=(a=e.minWidth)!=null?a:Dt,l=(r=n.minWidth)!=null?r:Dt,d=Math.min(e.maxWidth||1/0,s.width-l),p=Math.min(n.maxWidth||1/0,s.width-u);let h=u-t.left.width;const y=t.right.width-p;h<y&&(h=y);let g=t.right.width-l;const x=d-t.left.width;g>x&&(g=x);const P=Math.min(Math.max(o,h),g),C=t.left.width+P,_=t.right.width-P,b=C/s.width*s.flex,E=_/s.width*s.flex;return{leftFlex:b,leftW:C,rightFlex:E,rightW:_}}function As(t,e){const n=[];let o=e;for(;o!==t;){const a=o.parentElement;if(!a)return n;const s=Array.from(a.childNodes).indexOf(o);if(n.unshift(s),a===t)return n;o=a}return n}const Qn=[];function Ns(t,e){const n=new WeakMap;for(const a of e)n.set(a,As(t,a));const o=(a,r)=>{const s=n.get(a)||Qn,u=n.get(r)||Qn,l=Math.max(s.length,u.length);for(let d=0;d<l;d+=1){const p=s[d]||-1,h=u[d]||-1;if(p!==h)return p-h}return 0};e.sort(o)}function Ls(){const t=[],e=[],n=new WeakMap,o=new Set,a={};let r=null,s=0,u=null,l=new Map,d=!1;function p(b){o.add(b),u===b&&(u=null),_()}function h(b){o.delete(b),u=b,_()}function y(b,E){return n.set(b,{...E,original:E}),e.push(b),r&&Ns(r,e),h(b),()=>{const m=e.indexOf(b);m>-1&&e.splice(m,1),n.delete(b),_()}}function g(b,E,m){var f,v,O,S;const I=e.indexOf(E),D=n.get(E);if(!D)return;const R=e[I+1],F=n.get(R);if(F){if(b==="start"&&(d=!0,a.left={element:E,flex:D.flex||1,width:E.offsetWidth},a.right={element:R,flex:F.flex||1,width:R.offsetWidth},_()),b==="move"&&a.left&&a.right){l=new Map;const{leftW:T,rightW:N,leftFlex:Q,rightFlex:G}=js(a,D,F,m);l.set(E,{flex:Q,width:T}),l.set(R,{flex:G,width:N}),_()}if(b==="end"){d=!1;const T=l.get(E),N=l.get(R);n.set(E,{...D,currentMinWidth:0,currentMaxWidth:(f=D.maxWidth)!=null?f:1/0,flex:(v=T==null?void 0:T.flex)!=null?v:D.flex}),n.set(R,{...F,currentMinWidth:0,currentMaxWidth:(O=D.maxWidth)!=null?O:1/0,flex:(S=N==null?void 0:N.flex)!=null?S:F.flex}),l=new Map,delete a.left,delete a.right,_()}}}function x(b){r=b}function P(b){s=b,_()}function C(b){return t.push(b),()=>{const E=t.push(b);E>-1&&t.splice(E,1)}}return{collapse:p,expand:h,mount:y,resize:g,setRootElement:x,setRootWidth:P,subscribe:C};function _(){var b,E,m,f;if(!s)return;const v=[];for(const T of e)T!==u&&v.unshift(T);u&&v.unshift(u);const O=new WeakMap,S=v.length,I=v[0],D=(S-1)*vt;let R=s-D;for(const T of v){const N=n.get(T);if(!N)continue;const Q=N.currentMinWidth||N.minWidth||Dt,G=T===I,A=o.has(T),te=Q>R,ae=G?!1:A||te,re=l.get(T);O.set(T,{element:T,collapsed:ae,currentMinWidth:(b=re==null?void 0:re.width)!=null?b:N.currentMinWidth,currentMaxWidth:(E=re==null?void 0:re.width)!=null?E:N.currentMaxWidth,flex:(f=(m=re==null?void 0:re.flex)!=null?m:N.flex)!=null?f:1}),ae?R-=vt:R-=Q-vt}const F=[];for(const T of e){const N=O.get(T);N&&F.push(N)}for(const T of t)T({expandedElement:u||e[e.length-1]||null,panes:F,resizing:d})}}function Fs(t){const{children:e,minWidth:n,onCollapse:o,onExpand:a,...r}=t,s=c.useMemo(()=>Ls(),[]),[u,l]=c.useState(null),d=Qe(u),p=(d==null?void 0:d.width)||0,h=p===void 0||!n?void 0:p<n,[y,g]=c.useState({expandedElement:null,panes:[],resizing:!1});c.useEffect(()=>s.setRootElement(u),[s,u]),c.useEffect(()=>s.setRootWidth(p),[s,p]),c.useEffect(()=>s.subscribe(g),[s]),c.useEffect(()=>{h!==void 0&&(h&&o&&o(),!h&&a&&a())},[h,o,a]);const x=c.useMemo(()=>({collapse:s.collapse,collapsed:h,expand:s.expand,expandedElement:y.expandedElement,mount:s.mount,panes:y.panes,resize:s.resize,resizing:y.resizing}),[h,s,y.expandedElement,y.panes,y.resizing]);return i(yr.Provider,{value:x,children:i(_r,{"data-ui":"PaneLayout",...r,"data-collapsed":h?"":void 0,"data-resizing":y.resizing?"":void 0,"data-mounted":p?"":void 0,ref:l,children:e})})}class Se extends Error{constructor(e){let{message:n,context:o,helpId:a,cause:r}=e;super(n),this.context=o,this.helpId=a,this.cause=r}}const Zn=new WeakMap;function ot(t){const e=Zn.get(t);if(e)return e;const n=yi();return Zn.set(t,n),n}const eo=new WeakMap;function Vo(t,e){const n=eo.get(t)||new Map;if(n){const r=n.get(e);if(r)return r}const o=t[e];if(typeof o!="function")throw new Error("Expected property `".concat(e,"` to be a function but got ").concat(typeof o," instead."));const a=o.bind(t);return n.set(e,a),eo.set(t,n),a}const zs=t=>!!t&&typeof(t==null?void 0:t.then)=="function",Bs=t=>de(t)?typeof t.serialize=="function":!1,Ws=t=>(e,n,o)=>{try{return t(e,n,o)}catch(a){throw a instanceof Se?a:new Se({message:typeof(a==null?void 0:a.message)=="string"?a.message:"",context:n,cause:a})}},Vs=t=>function(){return t(...arguments).pipe(_i(1),xi())};function Uo(t){const e=Ws(Vs(t((n,o,a)=>{if(!n)throw new Se({message:"Pane returned no child",context:o,helpId:"structure-item-returned-no-child"});return zs(n)||hi(n)?Po(n).pipe(et(r=>e(r,o,a))):Bs(n)?e(n.serialize(o),o,a):typeof n=="function"?e(n(o.id,o),o,a):se(n)})));return e}async function Us(t){const e=new Map,o=Uo(l=>(d,p,h)=>{const y=d&&"".concat(ot(d),"-").concat(p.path.join("__")),g=y&&e.get(y);if(g)return g;const x=l(d,p,h);return y&&e.set(y,x),x}),a=[[{id:"__edit__".concat(t.params.id),params:{...At(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function r(l){let{currentId:d,flatIndex:p,intent:h,params:y,parent:g,path:x,payload:P,unresolvedPane:C,levelIndex:_,structureContext:b}=l;var E;if(!C)return[];const{id:m,type:f,...v}=y,S=await Ao(o(C,{id:d,splitIndex:0,parent:g,path:x,index:p,params:{},payload:void 0,structureContext:b},p));return S.type==="document"&&S.id===m?[{panes:[...x.slice(0,x.length-1).map(I=>[{id:I}]),[{id:m,params:v,payload:P}]],depthIndex:x.length,levelIndex:_}]:(E=S.canHandleIntent)!=null&&E.call(S,h,y,{pane:S,index:p})||S.type==="documentList"&&S.schemaTypeName===f&&S.options.filter==="_type == $type"?[{panes:[...x.map(I=>[{id:I}]),[{id:y.id,params:v,payload:P}]],depthIndex:x.length,levelIndex:_}]:S.type==="list"&&S.child&&S.items?(await Promise.all(S.items.map((I,D)=>I.type==="divider"?Promise.resolve([]):r({currentId:I._id||I.id,flatIndex:p+1,intent:h,params:y,parent:S,path:[...x,I.id],payload:P,unresolvedPane:typeof S.child=="function"?Vo(S,"child"):S.child,levelIndex:D,structureContext:b})))).flat():[]}const u=(await r({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((l,d)=>l.depthIndex===d.depthIndex?l.levelIndex-d.levelIndex:l.depthIndex-d.depthIndex)[0];return u?u.panes:a}function pe(){const t=c.useContext(Ta);if(!t)throw new Error("DeskTool: missing context value");return t}const Hs=(t,e)=>{const n=t.replace(/^__edit__/,""),{params:o,payload:a,structureContext:{resolveDocumentNode:r}}=e,{type:s,template:u}=o;if(!s)throw new Error("Document type for document with ID ".concat(n," was not provided in the router params."));let l=r({schemaType:s,documentId:n});return l=l.id("editor").title("Editor"),u&&(l=l.initialValueTemplate(u,a)),l.serialize()};function $s(t){var e,n;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&ot(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(e=t.serializeOptions)==null?void 0:e.index,serializeOptionsPath:(n=t.serializeOptions)==null?void 0:n.path}),")")}const to=t=>{const e={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?ot(t.paneNode):null};return"metaHash(".concat(JSON.stringify(e),")")};function He(t){let{unresolvedPane:e,flattenedRouterPanes:n,parent:o,path:a,resolvePane:r,structureContext:s}=t;const[u,...l]=n,d=l[0],p={id:u.routerPaneSibling.id,splitIndex:u.siblingIndex,parent:o,path:[...a,u.routerPaneSibling.id],index:u.flatIndex,params:u.routerPaneSibling.params||{},payload:u.routerPaneSibling.payload,structureContext:s};try{return r(e,p,u.flatIndex).pipe(et(h=>{const y={type:"resolvedMeta",...u,paneNode:h,path:p.path},g=l.map((P,C)=>({type:"loading",path:[...p.path,...l.slice(C).map((E,m)=>"[".concat(P.flatIndex+m,"]"))],paneNode:null,...P}));if(!l.length)return se([y]);let x;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?x=He({unresolvedPane:Hs,flattenedRouterPanes:l,parent:o,path:p.path,resolvePane:r,structureContext:s}):u.groupIndex===(d==null?void 0:d.groupIndex)?x=He({unresolvedPane:e,flattenedRouterPanes:l,parent:o,path:a,resolvePane:r,structureContext:s}):x=He({unresolvedPane:typeof h.child=="function"?Vo(h,"child"):h.child,flattenedRouterPanes:l,parent:h,path:p.path,resolvePane:r,structureContext:s}),Co(se([y,...g]),x.pipe(le(P=>[y,...P])))}))}catch(h){if(h instanceof Se&&(h.context&&console.warn("Pane resolution error at index ".concat(h.context.index).concat(h.context.splitIndex>0?" for split pane index ".concat(h.context.splitIndex):"",": ").concat(h.message).concat(h.helpId?" - see ".concat(Ro(h.helpId)):""),h),h.helpId==="structure-item-returned-no-child"))return se([]);throw h}}function Gs(t){let{routerPanesStream:e,rootPaneNode:n,initialCacheState:o={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>fi},structureContext:a}=t;return e.pipe(le(s=>[[{id:"root"}],...s]),le(s=>s.flatMap((l,d)=>l.map((p,h)=>({routerPaneSibling:p,groupIndex:d,siblingIndex:h}))).map((l,d)=>({...l,flatIndex:d}))),Wr([]),Ei(),le(s=>{let[u,l]=s;for(let d=0;d<l.length;d++){const p=u[d],h=l[d];if(!Pt(p,h))return{flattenedRouterPanes:l,diffIndex:d}}return{flattenedRouterPanes:l,diffIndex:l.length}}),vn((s,u)=>{const{cacheKeysByFlatIndex:l,resolvedPaneCache:d}=s,{flattenedRouterPanes:p,diffIndex:h}=u,y=l.slice(0,h+1),g=l.slice(h+1),x=new Set(y.flatMap(_=>Array.from(_))),P=g.flatMap(_=>Array.from(_)).filter(_=>!x.has(_));for(const _ of P)d.delete(_);return{flattenedRouterPanes:p,cacheKeysByFlatIndex:l,resolvedPaneCache:d,resolvePane:Uo(_=>(b,E,m)=>{const f=b&&"".concat(ot(b),"-").concat($s(E)),v=f&&d.get(f);if(v)return v;const O=_(b,E,m);if(!f)return O;const S=l[m]||new Set;return S.add(f),l[m]=S,d.set(f,O),O})}},o),et(s=>{let{flattenedRouterPanes:u,resolvePane:l}=s;return He({unresolvedPane:n,flattenedRouterPanes:u,parent:null,path:[],resolvePane:l,structureContext:a})})).pipe(vn((s,u)=>u.map((l,d)=>{const p=s[d];return!p||l.type!=="loading"?l:p.routerPaneSibling.id===l.routerPaneSibling.id?p:l}),[]),lo((s,u)=>{if(s.length!==u.length)return!1;for(let l=0;l<u.length;l++){const d=s[l],p=u[l];if(to(d)!==to(p))return!1}return!0}))}function Ys(){const t=c.useMemo(()=>new Vr(1),[]),e=c.useMemo(()=>t.asObservable().pipe(le(o=>(o==null?void 0:o.panes)||[])),[t]),{state:n}=Tt();return c.useEffect(()=>{t.next(n)},[n,t]),e}function Ks(){const[t,e]=c.useState();if(t)throw t;const{structureContext:n,rootPaneNode:o}=pe(),[a,r]=c.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),s=Ys();return c.useEffect(()=>{const l=Gs({rootPaneNode:o,routerPanesStream:s,structureContext:n}).pipe(le(d=>{const p=d.reduce((g,x)=>{const P=g[x.groupIndex]||[];return P[x.siblingIndex]=x.routerPaneSibling,g[x.groupIndex]=P,g},[]),h=p.length,y=d.map(g=>{var x;const{groupIndex:P,flatIndex:C,siblingIndex:_,routerPaneSibling:b,path:E}=g,m=b.id,f=p[P+1];return{active:P===h-2,childItemId:(x=f==null?void 0:f[0].id)!=null?x:null,index:C,itemId:b.id,groupIndex:P,key:"".concat(g.type==="loading"?"unknown":g.paneNode.id,"-").concat(m,"-").concat(_),pane:g.type==="loading"?Et:g.paneNode,params:b.params||{},path:E.join(";"),payload:b.payload,selected:C===d.length-1,siblingIndex:_}});return{paneDataItems:y,routerPanes:p,resolvedPanes:y.map(g=>g.pane)}})).subscribe({next:d=>r(d),error:d=>e(d)});return()=>l.unsubscribe()},[o,s,n]),a}async function qs(t,e,n){if(e&&n)return{id:e,type:n};if(!e&&n)return{id:Ur(),type:n};if(e&&!n){const o=await Ao(t.resolveTypeForDocument(e));return{id:e,type:o}}throw new Se({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const Xs={},Js=c.memo(function(){const{navigate:e}=Tt(),n=jt(c.useCallback(l=>{const d=typeof l.intent=="string"?l.intent:void 0;return d?{intent:d,params:de(l.params)?l.params:Xs,payload:l.payload}:void 0},[])),{rootPaneNode:o,structureContext:a}=pe(),r=po(),[s,u]=c.useState(null);if(s)throw s;return c.useEffect(()=>{if(n){const{intent:l,params:d,payload:p}=n;let h=!1;async function y(){const{id:g,type:x}=await qs(r,typeof d.id=="string"?d.id:void 0,typeof d.type=="string"?d.type:void 0);if(h)return;const P=await Us({intent:l,params:{...d,id:g,type:x},payload:p,rootPaneNode:o,structureContext:a});h||e({panes:P},{replace:!0})}return y().catch(u),()=>{h=!0}}},[r,n,e,o,a]),null}),Qs=B.span(Cn||(Cn=z([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function Zs(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function ec(t){let{error:e}=t;if(!(e instanceof Se))throw e;const{cause:n}=e,o=(n==null?void 0:n.stack)||e.stack,a=o&&!(n instanceof mt)&&!e.message.includes("Module build failed:"),r=n instanceof mt?n.path:[],s=n instanceof mt&&n.helpId||e.helpId,u=c.useCallback(()=>{window.location.reload()},[]);return i(ce,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:w(je,{children:[i(Hr,{as:"h2",children:"Encountered an error while reading structure"}),w(ce,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[r.length>0&&w(oe,{space:2,children:[i(Ct,{children:"Structure path"}),i(It,{children:r.slice(1).map((l,d)=>i(Qs,{children:l},"".concat(l,"-").concat(d)))})]}),w(oe,{marginTop:4,space:2,children:[i(Ct,{children:"Error"}),i(It,{children:a?Zs(o):e.message})]}),s&&i(k,{marginTop:4,children:i(j,{children:i("a",{href:Ro(s),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),i(k,{marginTop:4,children:i($,{text:"Reload",icon:go,tone:"primary",onClick:u})})]})]})})}function tc(t){const{isSelected:e,pane:n,paneKey:o}=t,a=de(n)&&n.type||null;return w(qe,{id:o,selected:e,children:[i(Je,{title:"Unknown pane type"}),i(ke,{children:i(k,{padding:4,children:typeof a=="string"?w(j,{as:"p",muted:!0,children:["Structure item of type ",i("code",{children:a})," is not a known entity."]}):w(j,{as:"p",muted:!0,children:["Structure item is missing required ",i("code",{children:"type"})," property."]})})})]})}function nc(t){const e=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],n=se(null);return $r(...e.map(o=>{let{ms:a,message:r}=o;return n.pipe(Gr(r),Yr(a))}))}const oc="Loading…",ac=B(L)(In||(In=z([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),Me=c.memo(t=>{const{delay:e=300,flex:n,message:o=nc,minWidth:a,paneKey:r,path:s,selected:u,title:l,tone:d}=t,p=c.useMemo(()=>typeof o=="function"?o(s?s.split(";"):[]):o,[o,s]),[h,y]=c.useState(()=>typeof p=="string"?p:oc);c.useEffect(()=>{if(typeof p!="object"||typeof p.subscribe=="function")return;const b=p.subscribe(y);return()=>b.unsubscribe()},[p]);const[g,x]=c.useState(null),[P,C]=c.useState(!1);return c.useEffect(()=>{if(g)return ja(()=>C(!0))},[g]),i(qe,{flex:n,id:r,minWidth:a,selected:u,tone:d,children:i(ke,{children:w(ac,{align:"center","data-mounted":P?"":void 0,direction:"column",height:"fill",justify:"center",ref:x,children:[i(Ze,{muted:!0}),(l||h)&&i(k,{marginTop:3,children:i(j,{align:"center",muted:!0,size:1,children:l||h})})]})})})});Me.displayName="LoadingPane";const rc={component:c.lazy(()=>Fe(()=>import("./index-a69607ad-b6ec09ab.js"),["static/index-a69607ad-b6ec09ab.js","static/sanity-44d5c817.js"])),document:c.lazy(()=>Fe(()=>import("./index-ac94928b-4cc54247.js"),["static/index-ac94928b-4cc54247.js","static/sanity-44d5c817.js"])),documentList:c.lazy(()=>Fe(()=>import("./index-e60b2e9d-23fb17df.js"),["static/index-e60b2e9d-23fb17df.js","static/sanity-44d5c817.js","static/PaneItem-a96ebe52-e947ac96.js"])),list:c.lazy(()=>Fe(()=>import("./index-851f05dd-3e7133ef.js"),["static/index-851f05dd-3e7133ef.js","static/sanity-44d5c817.js","static/PaneItem-a96ebe52-e947ac96.js"]))},ic=c.memo(function(e){const{active:n,childItemId:o,groupIndex:a,index:r,itemId:s,pane:u,paneKey:l,params:d,payload:p,path:h,selected:y,siblingIndex:g}=e,x=rc[u.type]||tc;return i(Ts,{flatIndex:r,index:a,params:d,payload:p,siblingIndex:g,children:i(c.Suspense,{fallback:i(Me,{paneKey:l,path:h,selected:y}),children:i(x,{childItemId:o||"",index:r,itemId:s,isActive:n,isSelected:y,paneKey:l,pane:u})})})},(t,e)=>{let{params:n={},payload:o=null,...a}=t,{params:r={},payload:s=null,...u}=e;if(!Pt(n,r)||!Pt(o,s))return!1;const l=new Set([...Object.keys(a),...Object.keys(u)]);for(const d of l)if(a[d]!==u[d])return!1;return!0});function Ho(t){const{children:e,flex:n,minWidth:o,paneKey:a,title:r="Error",tone:s="critical"}=t;return w(qe,{flex:n,id:a,minWidth:o,tone:s,children:[i(Je,{title:r}),i(ke,{overflow:"auto",children:i(k,{paddingX:4,paddingY:5,children:e})})]})}function sc(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function cc(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}const lc=["patch","commit"],uc=c.memo(function(){const{push:e}=Re(),{documentId:n,documentType:o}=V(),a=Aa(n,o),r=c.useRef(a);return c.useEffect(()=>{!a||a===r.current||(a.type==="error"&&e({closable:!0,duration:3e4,status:"error",title:sc(a.op),description:w("details",{children:[i("summary",{children:"Details"}),a.error.message]})}),a.type==="success"&&!lc.includes(a.op)&&e({closable:!0,status:"success",title:cc(a.op)}),r.current=a)},[a,e]),null}),dc=t=>{const{features:e,hasValue:n,changesOpen:o}=t;return e.reviewChanges?{action:"reviewChanges",title:"Review changes",icon:Kr,isDisabled:o||!n}:null},pc=t=>{let{hasValue:e}=t;return{action:"inspect",title:"Inspect",icon:qr,isDisabled:!e,shortcut:"Ctrl+Alt+I"}},hc=t=>{let{previewUrl:e}=t;return e?{action:"production-preview",title:"Open preview",icon:Xr,shortcut:"Ctrl+Alt+O"}:null},fc=t=>[hc,dc,pc].filter(Boolean).map(n=>n(t)).filter(n=>n!==null),mc=t=>de(t)&&typeof t._id=="string"&&typeof t._type=="string";function gc(t){const[e,n]=c.useState(void 0),[o,a]=c.useState(null),{resolveProductionUrl:r}=Xe().document,s=wi(t);if(o)throw o;return c.useEffect(()=>{s.pipe(xo(500),et(u=>mc(u)?Po(r({document:u})):se(void 0)),xr(u=>{const l=de(u)&&typeof u.message=="string"?u.message:"Unknown error";throw new Error("An error was thrown while trying to get your preview url: ".concat(l))})).subscribe({next:n,error:a})},[r,s]),e}function vc(t,e){const n=e.panePayload||{},o=e.templateName;e.urlTemplate&&o&&o!==e.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(e.urlTemplate,'", structure node says "').concat(o,'". Using "').concat(o,'".'));const a=o||e.urlTemplate,r=t.filter(l=>l.schemaType===e.documentType),s={...e.templateParams,...typeof n=="object"?n||{}:{}};let u=a;return!a&&r.length===1&&(u=r[0].id),{templateName:u,templateParams:s}}const bc={},$o=c.memo(t=>{const{children:e,index:n,pane:o,paneKey:a}=t,r=ho(),s=fo(),{actions:u,badges:l,unstable_languageFilter:d}=Xe().document,p=Na(),h=Te(),{features:y}=pe(),{push:g}=Re(),{options:x,menuItemGroups:P,title:C=null,views:_=[]}=o,b=ge(x),E=b.id,m=St(E),f=x.type,v=ge(h.params),O=ge(h.payload),{templateName:S,templateParams:I}=c.useMemo(()=>vc(s,{documentType:f,templateName:b.template,templateParams:b.templateParameters,panePayload:O,urlTemplate:v==null?void 0:v.template}),[f,b,v,O,s]),D=La({documentId:m,documentType:f,templateName:S,templateParams:I}),R=ge(D),{patch:F}=Fa(m,f),T=za(m,f),{validation:N}=Ba(m,f),Q=Wa(m,f),G=r.get(f),A=(T==null?void 0:T.draft)||(T==null?void 0:T.published)||R.value,te=c.useMemo(()=>u({schemaType:f,documentId:m}),[u,m,f]),ae=c.useMemo(()=>l({schemaType:f,documentId:m}),[l,m,f]),re=c.useMemo(()=>d({schemaType:f,documentId:m}),[m,f,d]),qt=ge(N),at=ge(_),H=h.params||bc,[Xt,Ee]=c.useState(()=>H.path?Oe(H.path):[]),ta=H.view||at[0]&&at[0].id||null,[na,oa]=c.useState("closed"),we=!!H.since,[Jt,aa]=c.useState(null),he=Va({documentId:m,documentType:f,onError:aa,rev:H.rev,since:H.since}),Qt=U(he,M=>M.onOlderRevision),Zt=U(he,M=>M.revTime),ra=U(he,M=>M.sinceAttributes),en=U(he,M=>M.timelineDisplayed),ia=U(he,M=>M.timelineReady),fe=gc(A),[sa,ca]=c.useState([]);c.useEffect(()=>{const M=p.documentPresence(m).subscribe(Y=>{ca(Y)});return()=>{M.unsubscribe()}},[m,p]);const tn=!!A,rt=c.useMemo(()=>fc({features:y,hasValue:tn,changesOpen:we,previewUrl:fe}),[we,y,tn,fe]),it=H.inspect==="on",nn=we?ra:(T==null?void 0:T.published)||null,st=Q==="connected"&&T.ready&&(ia||!!Jt),on=c.useMemo(()=>Qt?en||{_id:A._id,_type:A._type}:A,[Qt,en,A]),la=c.useCallback((M,Y)=>{h.setParams({...h.params,since:M,rev:Y||void 0})},[h]),ua=c.useCallback(M=>{Ee(M),p.setLocation([{type:"document",documentId:m,path:M,lastActiveAt:new Date().toISOString()}])},[m,p,Ee]),da=c.useCallback(M=>{Ee([])},[Ee]),an=c.useRef(()=>{throw new Error("Nope")});an.current=M=>{F.execute(Ua(M.patches),R.value)};const pa=c.useCallback(M=>an.current(M),[]),ha=c.useCallback(()=>{h.setParams({...H,since:void 0})},[h,H]),ct=c.useCallback(()=>{h.setParams({...H,since:"@lastPublished"})},[h,H]),fa=c.useCallback(()=>h.closeCurrent(),[h]),ma=c.useCallback(()=>h.duplicateCurrent(),[h]),Le=c.useCallback(function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!it)?h.setParams({...H,inspect:"on"}):h.setParams(At(H,"inspect"))},[it,h,H]),lt=c.useCallback(M=>M.action==="production-preview"&&fe?(window.open(fe),!0):M.action==="inspect"?(Le(!0),!0):M.action==="reviewChanges"?(ct(),!0):!1,[ct,fe,Le]),ga=c.useCallback(M=>{for(const Y of rt)if(Y.shortcut&&Nt(Y.shortcut,M)){M.preventDefault(),M.stopPropagation(),lt(Y);return}},[lt,rt]),va=c.useCallback(()=>Le(!1),[Le]),[ba,rn]=c.useState([]),[ya,sn]=c.useState(),[cn,ln]=c.useState(),[un,dn]=c.useState(),_a=c.useCallback((M,Y)=>{ln(Z=>ve(Z,M,Y))},[]),xa=c.useCallback((M,Y)=>{dn(Z=>ve(Z,M,Y))},[]),Pa=c.useCallback((M,Y)=>sn(Z=>ve(Z,M,Y)),[]),Sa=A._createdAt?"update":"create",pn=c.useMemo(()=>!!(G!=null&&G.liveEdit),[G==null?void 0:G.liveEdit]),ut=A._id?A._id:"dummy-id",Ea=c.useMemo(()=>({...A,_id:pn?St(ut):Ha(ut)}),[pn,A,ut]),[Ce,dt]=$a({document:Ea,permission:Sa}),hn=!(A!=null&&A._id),wa=c.useMemo(()=>{const M=!dt&&!(Ce!=null&&Ce.granted),Y=!fn(G,"update"),Z=hn&&!fn(G,"create");return!st||Zt!==null||M||Y||Z||Q==="reconnecting"},[Q,hn,dt,Ce==null?void 0:Ce.granted,st,Zt,G]),pt=Ga(G,{value:on,readOnly:wa,comparisonValue:nn,focusPath:Xt,openPath:ba,collapsedPaths:cn,presence:sa,validation:qt,collapsedFieldSets:un,fieldGroupState:ya,changesOpen:we}),ht=c.useRef(pt);ht.current=pt;const Ca=c.useCallback(M=>{Ya(ht.current,M).forEach(Z=>{Z.type==="expandPath"&&ln(me=>ve(me,Z.path,!1)),Z.type==="expandFieldSet"&&dn(me=>ve(me,Z.path,!1)),Z.type==="setSelectedGroup"&&sn(me=>ve(me,Z.path,Z.groupName))}),rn(M)},[ht]),Ia={actions:te,activeViewId:ta,badges:ae,changesOpen:we,collapsedFieldSets:un,collapsedPaths:cn,compareValue:nn,connectionState:Q,displayed:on,documentId:m,documentIdRaw:E,documentType:f,editState:T,focusPath:Xt,menuItems:rt,onBlur:da,onChange:pa,onFocus:ua,onPathOpen:Ca,onHistoryClose:ha,onHistoryOpen:ct,onInspectClose:va,onKeyUp:ga,onMenuAction:lt,onPaneClose:fa,onPaneSplit:ma,onSetActiveFieldGroup:Pa,onSetCollapsedPath:_a,onSetCollapsedFieldSet:xa,index:n,inspectOpen:it,validation:qt,menuItemGroups:P||[],paneKey:a,previewUrl:fe,ready:st,schemaType:G,isPermissionsLoading:dt,permissions:Ce,setTimelineMode:oa,setTimelineRange:la,timelineError:Jt,timelineMode:na,timelineStore:he,title:C,value:A,views:at,formState:pt,unstable_languageFilter:re};return c.useEffect(()=>{Q==="reconnecting"&&g({id:"sanity/desk/reconnecting",status:"warning",title:i(W,{children:"Connection lost. Reconnecting…"})})},[Q,g]),c.useEffect(()=>{Ee(H.path?Oe(H.path):[]),rn([])},[H.path,m]),i(Ka.Provider,{value:Ia,children:e})});$o.displayName="DocumentPaneProvider";const yc={create:"created",delete:"deleted",discardDraft:"discarded draft",initial:"created",editDraft:"edited",editLive:"live edited",publish:"published",unpublish:"unpublished"},_c={create:yn,delete:Pi,discardDraft:De,initial:yn,editDraft:_n,editLive:_n,publish:ko,unpublish:Si};function Go(t){return yc[t]}function xc(t){return _c[t]}function Pc(t){let{maxLength:e,userIds:n}=t;return i(Eo,{maxLength:e,children:n.map(o=>i(wo,{user:o,withTooltip:!0},o))})}const $e=B(L)(t=>{let{theme:e}=t;var n;const o=(n=e.sanity.color.base.skeleton)==null?void 0:n.from;return ue(On||(On=z([`
    --timeline-hairline-width: 1px;
    position: relative;
    z-index: 2;
    margin: 0;
    padding: 0;

    &::before {
      position: absolute;
      content: '';
      height: 100%;
      width: var(--timeline-hairline-width);
      background: `,`;
      top: 0;
      left: calc((100% - var(--timeline-hairline-width)) / 2);
      z-index: 1;
    }
  `])),o)}),Sc=B($)(t=>{let{$selected:e}=t;return ue(Dn||(Dn=z([`
    position: relative;
    width: 100%;

    /* Line styling */
    &[data-first] `,`::before {
      height: 50%;
      top: unset;
      bottom: 0;
    }

    &[data-last] `,`::before {
      height: 50%;
    }

    `,`
  `])),$e,$e,e&&ue(Mn||(Mn=z([`
      `,`::before {
        background: transparent;
      }
    `])),$e))}),Ec=B(k)(kn||(kn=z([`
  background: var(--card-bg-color);
  border-radius: 50px;
  position: relative;
  z-index: 2;
`]))),wc=B(j)(Rn||(Rn=z([`
  text-transform: capitalize;
`]))),Cc=B(k)(Tn||(Tn=z([`
  min-width: 1rem;
  margin-left: `,`;
`])),t=>{let{theme:e}=t;return"-".concat(be(e.sanity.space[1]))}),no={initial:"primary",create:"primary",publish:"positive",editLive:"caution",editDraft:"caution",unpublish:"critical",discardDraft:"critical",delete:"critical",withinSelection:"primary"};function Ic(t){let{chunk:e,isFirst:n,isLast:o,isLatest:a,isSelected:r,onSelect:s,timestamp:u,type:l}=t;const d=xc(l),p=Array.from(e.authors),h=c.useMemo(()=>{const g=new Date(u);return So(g,"MMM d, yyyy, hh:mm a")},[u]),y=c.useCallback(g=>{g.preventDefault(),g.stopPropagation(),s(e)},[s,e]);return i(Sc,{$selected:r,"data-chunk-id":e.id,"data-first":n?!0:void 0,"data-last":o?!0:void 0,"data-ui":"timelineItem",mode:r?"default":"bleed",onClick:y,padding:0,radius:2,tone:r?"primary":no[e.type],children:i(k,{paddingX:2,children:w(L,{align:"stretch",children:[i($e,{align:"center",children:i(Ec,{padding:2,children:i(j,{size:2,children:d&&c.createElement(d)})})}),w(oe,{space:2,margin:2,children:[a&&i(L,{children:i(ce,{padding:1,radius:2,shadow:1,tone:r?"primary":no[e.type],children:i(Ct,{muted:!0,size:0,children:"Latest"})})}),i(k,{children:i(wc,{size:1,weight:"medium",children:Go(l)||i("code",{children:l})})}),i(Cc,{paddingX:1,children:i(j,{size:0,muted:!0,children:h})})]}),i(L,{flex:1,justify:"flex-end",align:"center",children:i(Pc,{maxLength:3,userIds:p})})]})})})}const Oc=B(oe)(jn||(jn=z([`
  max-width: 200px;
`]))),Dc=B(L)(An||(An=z([`
  max-height: calc(100vh - 198px);
  min-width: 244px;
`]))),Mc=B(k)(t=>{let{$visible:e}=t;return ue(Nn||(Nn=z([`
    opacity: 0;
    pointer-events: none;

    `,`
  `])),e&&ue(Ln||(Ln=z([`
      opacity: 1;
      pointer-events: auto;
    `]))))}),Rt=t=>{let{chunks:e,disabledBeforeFirstChunk:n,hasMoreChunks:o,lastChunk:a,onLoadMore:r,onSelect:s,firstChunk:u}=t;const[l,d]=c.useState(!1),p=c.useMemo(()=>e.filter(g=>n&&u?g.index<u.index:!0),[e,n,u]),h=c.useMemo(()=>a!=null&&a.id?p.findIndex(g=>g.id===a.id):-1,[a==null?void 0:a.id,p]),y=c.useCallback((g,x)=>{let{activeIndex:P}=x;const C=P===0,_=p&&P===p.length-1||!1;return w(k,{paddingBottom:_?1:0,paddingTop:C?1:0,paddingX:1,children:[i(Ic,{chunk:g,isFirst:C,isLast:_,isLatest:P===0&&!n,isSelected:P===h,onSelect:s,timestamp:g.endTimestamp,type:g.type}),P===p.length-1&&o&&i(L,{align:"center",justify:"center",padding:4,children:i(Ze,{muted:!0})})]})},[n,p,o,s,h]);return c.useEffect(()=>d(!0),[]),w(Mc,{$visible:!h||l,"data-ui":"timeline",children:[p.length===0&&w(Oc,{padding:3,space:3,children:[i(j,{size:1,weight:"semibold",children:"No document history"}),i(j,{muted:!0,size:1,children:"When changing the content of the document, the document versions will appear in this menu."})]}),p.length>0&&i(Dc,{direction:"column",children:i(mi,{activeItemDataAttr:"data-hovered",ariaLabel:"Document revisions",autoFocus:!0,initialIndex:h,initialScrollAlign:"center",itemHeight:40,items:p,onEndReached:r,onEndReachedIndexOffset:20,overscan:5,renderItem:y,wrapAround:!1})})]})};Rt.displayName="Timeline";function kc(){return w(L,{align:"flex-start",gap:3,padding:4,children:[i(gt,{tone:"critical",children:i(To,{})}),w(oe,{space:4,children:[i(gt,{size:1,tone:"critical",weight:"semibold",children:"An error occurred whilst retrieving document changes."}),i(gt,{size:1,tone:"critical",children:"Document history transactions have not been affected."})]})]})}const Rc=B(Lt)(Fn||(Fn=z([`
  overflow: hidden;
`])));function Yo(t){let{chunk:e,mode:n,placement:o}=t;const{setTimelineRange:a,setTimelineMode:r,timelineError:s,ready:u,timelineStore:l}=V(),[d,p]=c.useState(!1),[h,y]=c.useState(null),[g,x]=c.useState(null),P=Re(),C=U(l,A=>A.chunks),_=U(l,A=>A.isLoading),b=U(l,A=>A.hasMoreChunks),E=U(l,A=>A.realRevChunk),m=U(l,A=>A.sinceTime),f=c.useCallback(()=>{r(n),p(!0)},[n,r]),v=c.useCallback(()=>{r("closed"),p(!1)},[r]),O=c.useCallback(()=>{d&&v()},[v,d]),S=c.useCallback(A=>{d&&(A.key==="Escape"||A.key==="Tab")&&(v(),h==null||h.focus())},[h,v,d]);Wt(O,[h,g]),Vt(S);const I=c.useCallback(A=>{try{const[te,ae]=l.findRangeForRev(A);r("closed"),a(te,ae)}catch(te){P.push({closable:!0,description:te.message,status:"error",title:"Unable to load revision"})}},[r,a,l,P]),D=c.useCallback(A=>{try{const[te,ae]=l.findRangeForSince(A);r("closed"),a(te,ae)}catch(te){P.push({closable:!0,description:te.message,status:"error",title:"Unable to load revision"})}},[r,a,l,P]),R=c.useCallback(()=>{_||l.loadMore()},[_,l]),F=s?i(kc,{}):w(W,{children:[n==="rev"&&i(Rt,{chunks:C,firstChunk:E,hasMoreChunks:b,lastChunk:E,onLoadMore:R,onSelect:I}),n==="since"&&i(Rt,{chunks:C,disabledBeforeFirstChunk:!0,firstChunk:E,hasMoreChunks:b,lastChunk:m,onLoadMore:R,onSelect:D})]}),T=Tc((e==null?void 0:e.endTimestamp)||""),N=e?"".concat(Pr(Go(e.type)),": ").concat(T):"Latest version",Q=e?"Since: ".concat(T):"Since: unknown version";return i(Rc,{constrainSize:!0,content:d&&F,"data-ui":"versionMenu",open:d,placement:o,portal:!0,ref:x,children:i($,{disabled:!u,mode:"bleed",fontSize:1,padding:2,iconRight:Sr,onClick:d?v:f,ref:y,selected:d,text:u?n==="rev"?N:Q:"Loading history"})})}function Tc(t){return c.useMemo(()=>{const n=t?new Date(t):new Date;return So(n,"MMM d, yyyy, hh:mm a")},[t])}function jc(){return i(Wo,{ms:300,children:w(L,{align:"center",direction:"column",height:"fill",justify:"center",paddingTop:3,children:[i(Ze,{muted:!0}),i(k,{marginTop:3,children:i(j,{align:"center",muted:!0,size:1,children:"Loading changes"})})]})})}function Ac(t){const e=new Map;return Jr(t,n=>{if(n.action==="unchanged"||!("annotation"in n)||!n.annotation)return!0;const{author:o,timestamp:a}=n.annotation,r=e.get(o);return(!r||r.timestamp<a)&&e.set(o,n.annotation),!0}),Array.from(e.values()).sort((n,o)=>n.timestamp<o.timestamp?1:-1)}const Nc=B(mo)(zn||(zn=z([`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`])));function Lc(){const{documentId:t,onHistoryClose:e,schemaType:n,timelineError:o,timelineStore:a,value:r}=V(),{collapsed:s}=Er(),u=c.useRef(null),l=U(a,C=>C.diff),d=U(a,C=>C.onOlderRevision),p=U(a,C=>C.selectionState),h=U(a,C=>C.sinceTime),y=p==="loading",g=!d,x=Pe.useMemo(()=>({documentId:t,schemaType:n,FieldWrapper:wr,rootDiff:l,isComparingCurrent:g,value:r}),[t,l,g,n,r]),P=Pe.useMemo(()=>l?Ac(l):[],[l]);return s?null:w(L,{direction:"column",flex:1,style:{borderLeft:"1px dashed var(--card-border-color)",overflow:"hidden",minWidth:320},"data-testid":"review-changes-pane",children:[i(Je,{actions:i($,{icon:De,mode:"bleed",onClick:e,padding:3,title:"Hide changes panel"}),subActions:P.length>0&&i(k,{paddingRight:1,children:i(Cr,{annotations:P,description:"Changes by",placement:"bottom-end",children:i(Eo,{maxLength:4,children:P.map(C=>{let{author:_}=C;return i(wo,{user:_},_)})})})}),tabs:i(Yo,{mode:"since",chunk:h,placement:"bottom-start"}),title:"Changes"}),i(ke,{children:i(Bt,{element:u.current,children:i(Nc,{"data-ui":"Scroller",ref:u,children:i(k,{flex:1,padding:4,children:i(Fc,{diff:l,documentContext:x,error:o,loading:y})})})})})]})}function Fc(t){let{error:e,diff:n,documentContext:o,loading:a}=t;const{schemaType:r}=V();return e?i(gn,{}):a?i(jc,{}):n?i(Ir.Provider,{value:o,children:i(Or,{diff:n,schemaType:r})}):i(gn,{})}function zc(t,e,n){const o=qa(),[a,r]=c.useState(n),s=c.useMemo(()=>o.forNamespace("desk-tool"),[o]),u=c.useMemo(()=>t?s.forNamespace(t).forKey(e):s.forKey(e),[s,t,e]);c.useEffect(()=>{const d=u.listen(n).subscribe({next:r});return()=>d==null?void 0:d.unsubscribe()},[n,e,t,u]);const l=c.useCallback(d=>{r(d),u.set(d)},[u]);return c.useMemo(()=>[a,l],[l,a])}const ye={id:"parsed",title:"Parsed"},_e={id:"raw",title:"Raw JSON"},Bc=[ye,_e],Ke=Ms(1e3);function Ko(t,e){const n=Ke.get(t);return n===void 0?(Ke.set(t,Array.isArray(e)||de(e)),Ko(t,e)):n}function Wc(t){const{path:e}=t,n=Ke.get(e);n!==void 0&&Ke.set(e,!n)}function qo(t){const e=window.getSelection();if(e){const n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t),e.addRange(n)}}function oo(t){qo(t.currentTarget)}function Vc(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),qo(t.currentTarget))}function Uc(t){return de(t)&&bn(t._id)&&bn(t._type)}const Hc=B.div(t=>{let{theme:e}=t;const{color:n,fonts:o,space:a}=e.sanity;return ue(Bn||(Bn=z([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),o.code.family,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(a[4]),be(a[3]),be(a[4]),o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,o.code.sizes[2].fontSize,o.code.sizes[2].lineHeight,be(a[4]/2),n.syntax.property,n.syntax.constant,be(a[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function $c(t){const{onChange:e,query:n}=t,o=c.useCallback(a=>e(a.target.value),[e]);return i(gi,{icon:vi,onChange:o,placeholder:"Search",radius:2,value:n||""})}function Gc(t){const{value:e}=t,{onInspectClose:n,paneKey:o}=V(),a="".concat(o,"_inspect_"),[r,s]=zc("desk-tool","inspect-view-preferred-view-mode-".concat(o),"parsed"),u=Bc.find(p=>p.id===r),l=c.useCallback(()=>{s(ye.id)},[s]),d=c.useCallback(()=>{s(_e.id)},[s]);return i(Ht,{id:"".concat(a,"dialog"),header:Uc(e)?w(W,{children:["Inspecting"," ",i("em",{children:i(Qr,{document:e})})]}):i("em",{children:"No value"}),onClose:n,onClickOutside:n,width:3,children:w(L,{direction:"column",height:"fill",children:[i(ce,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:w(Io,{space:1,children:[i(wt,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(ye.id),label:ye.title,onClick:l,selected:u===ye}),i(wt,{"aria-controls":"".concat(a,"tabpanel"),fontSize:1,id:"".concat(a,"tab-").concat(_e.id),label:_e.title,onClick:d,selected:u===_e})]})}),w(Zr,{"aria-labelledby":"".concat(a,"tab-").concat(r),flex:1,id:"".concat(a,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[u===ye&&i(Hc,{children:i(Os,{data:e,isExpanded:Ko,onClick:Wc,search:$c})}),u===_e&&i(It,{language:"json",tabIndex:0,onKeyDown:Vc,onDoubleClick:oo,onFocus:oo,children:JSON.stringify(e,null,2)})]})]})})}const Yc=B(ce)(Wn||(Wn=z([`
  position: relative;
  z-index: 50;
`]))),ao=B(j)(Vn||(Vn=z([`
  & > * {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),Xo=c.memo(()=>{var t,e,n,o,a,r;const s=Xa(),{params:u,groupIndex:l,routerPanesState:d,replaceCurrent:p,BackLink:h}=Te(),y=(t=d[l])==null?void 0:t[0].id,g=d[l-1],x=g==null?void 0:g[0],P=x==null?void 0:x.id,C=!!((e=x==null?void 0:x.params)!=null&&e.rev),_=c.useMemo(()=>(u==null?void 0:u.parentRefPath)&&Oe(u.parentRefPath)||null,[u==null?void 0:u.parentRefPath]),b=Ja(()=>{const f=_==null?void 0:_[0];if(!P||!f||!_)return se({loading:!1});const v=St(P),O=Oe(f),S=O.findIndex(I=>typeof I=="object"&&"_key"in I);return Co(se({loading:!0}),s.unstable_observePathsDocumentPair(v,S===-1?O:O.slice(0,S)).pipe(xo(750),le(I=>{let{draft:D,published:R}=I;var F;return{loading:!1,result:{availability:{draft:D.availability,published:R.availability},refValue:(F=Dr(D.snapshot||R.snapshot,_))==null?void 0:F._ref}}})))},[s,P,_],{loading:!0}),E=c.useCallback(()=>{var f;b.loading||(f=b.result)!=null&&f.refValue&&p({id:b.result.refValue,params:u})},[b.loading,b.result,p,u]);return!P||!_||C||b.loading||!((n=b.result)!=null&&n.availability.draft.available)&&!((o=b.result)!=null&&o.availability.published.available)||((a=b.result)==null?void 0:a.refValue)===y?null:i(Yc,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:i(je,{paddingX:4,paddingY:2,sizing:"border",width:1,children:w(L,{align:"center",children:[i(j,{size:1,children:i(Ft,{})}),(r=b.result)!=null&&r.refValue?w(W,{children:[i(k,{flex:1,marginLeft:3,children:i(ao,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),i(k,{marginLeft:3,children:i($,{onClick:E,icon:go,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):w(W,{children:[i(k,{flex:1,marginLeft:3,children:i(ao,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),i(k,{marginLeft:3,children:i($,{as:h,icon:De,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});Xo.displayName="ReferenceChangedBanner";const Kc=B(ce)(Un||(Un=z([`
  position: relative;
  z-index: 50;
`])));function qc(t){let{granted:e,requiredPermission:n}=t;var o,a;const r=ei(),s=((o=r==null?void 0:r.roles)==null?void 0:o.length)!==1,u=Xc(((a=r==null?void 0:r.roles)==null?void 0:a.map(l=>i("code",{children:l.title},l.name)))||[],", ");return e?null:i(Kc,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:i(je,{paddingX:4,paddingY:3,sizing:"border",width:1,children:w(L,{align:"flex-start",children:[i(j,{size:1,children:i(ti,{})}),i(k,{flex:1,marginLeft:3,children:w(j,{size:1,children:["Your role",s&&"s"," ",u," ",s?"do":"does"," not have permissions to"," ",n," this document."]})})]})})})}function Xc(t,e){return t.reduce((n,o)=>n===null?[o]:n.concat([e,o]),null)}function Jc(t){const e=c.useRef();return c.useEffect(()=>{e.current=t},[t]),e.current}const Qc=1e3*60*60*24*24;function Zc(t){const e=Re(),n=Jc(t.enabled);c.useEffect(()=>{!n&&t.enabled&&e.push({...t,duration:Qc}),n&&!t.enabled&&e.push({...t,duration:.01})},[t,e,n])}const el=t=>t.preventDefault();function tl(t){var e;const{hidden:n,margins:o}=t,{collapsedFieldSets:a,collapsedPaths:r,displayed:s,editState:u,documentId:l,documentType:d,onChange:p,validation:h,ready:y,formState:g,onFocus:x,onBlur:P,onSetCollapsedPath:C,onPathOpen:_,onSetCollapsedFieldSet:b,onSetActiveFieldGroup:E}=V(),m=po(),f=ni(l),v=c.useMemo(()=>oi(),[]),O=(e=u==null?void 0:u.transactionSyncLock)==null?void 0:e.enabled;Zc({id:"sync-lock-".concat(l),status:"warning",enabled:O,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),c.useEffect(()=>{const D=m.pair.documentEvents(l,d).pipe(ai(R=>{R.type==="mutation"&&v.publish(nl(R)),R.type==="rebase"&&v.publish(ol(R))})).subscribe();return()=>{D.unsubscribe()}},[l,m,d,v]);const S=!!(s!=null&&s._rev);c.useEffect(()=>{S&&v.publish({type:"mutation",patches:[],snapshot:s})},[S]);const I=c.useRef(null);return c.useEffect(()=>{ri(I.current)},[]),i(je,{hidden:n,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:i(ii,{margins:o,children:i(k,{as:"form",onSubmit:el,ref:I,children:y?g===null?i(k,{padding:2,children:i(j,{children:"This form is hidden"})}):i(si,{__internal_patchChannel:v,collapsedFieldSets:a,collapsedPaths:r,focusPath:g.focusPath,changed:g.changed,focused:g.focused,groups:g.groups,id:"root",members:g.members,onChange:p,onFieldGroupSelect:E,onPathBlur:P,onPathFocus:x,onPathOpen:_,onSetFieldSetCollapsed:b,onSetPathCollapsed:C,presence:f,readOnly:g.readOnly,schemaType:g.schemaType,validation:h,value:g.value}):i(Wo,{ms:300,children:w(L,{align:"center",direction:"column",height:"fill",justify:"center",children:[i(Ze,{muted:!0}),i(k,{marginTop:3,children:i(j,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function nl(t){const e=t.mutations.map(n=>n.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:Ot(t.origin,e)}}function ol(t){const e=t.remoteMutations.map(o=>o.patch).filter(Boolean),n=t.localMutations.map(o=>o.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:Ot("remote",e).concat(Ot("local",n))}}function al(){const{activeViewId:t,paneKey:e,views:n}=V(),o="".concat(e,"tabpanel");return i(Io,{space:1,children:n.map((a,r)=>{var s;return i(rl,{icon:a.icon,id:"".concat(e,"tab-").concat(a.id),isActive:t===a.id,label:i(W,{children:a.title}),tabPanelId:o,viewId:r===0?null:(s=a.id)!=null?s:null},a.id)})})}function rl(t){const{icon:e,id:n,isActive:o,label:a,tabPanelId:r,viewId:s}=t,{ready:u}=V(),{setView:l}=Te(),d=c.useCallback(()=>l(s),[l,s]);return i(wt,{"aria-controls":r,disabled:!u,fontSize:1,icon:e,id:n,selected:o,label:a,onClick:d})}const xt={error:{tone:"critical",icon:To},warning:{tone:"caution",icon:Ft},info:{tone:"primary",icon:ci}};function il(t){const{boundaryElement:e,isOpen:n,setOpen:o}=t,{onFocus:a,onPathOpen:r,schemaType:s,validation:u}=V(),l=c.useId(),d=u.length>0,p=u.some(Mr),h=u.some(kr),y=u.some(Rr),g=c.useMemo(()=>{if(p)return xt.error;if(h)return xt.warning;if(y)return xt.info},[p,y,h]),x=c.useCallback(C=>{r(C),a(C)},[a,r]),P=c.useCallback(()=>o(!1),[o]);return d?i(Oo,{id:l||"",button:i($,{...g,title:"Show validation issues",mode:"bleed","data-testid":"validation-list-button"}),menu:i(Do,{open:n,children:i(Tr,{documentType:s,validation:u,onClose:P,onFocus:x})}),popover:{portal:!0,boundaryElement:e,constrainSize:!0,preventOverflow:!0,width:0},placement:"bottom"}):null}function sl(){const{connectionState:t,schemaType:e,title:n,value:o}=V(),a=!!o&&t==="connected",{error:r,value:s}=jr({enabled:a,schemaType:e,value:o});return t!=="connected"?i(W,{}):n?i(W,{children:n}):o?r?w(W,{children:["Error: ",r.message]}):i(W,{children:(s==null?void 0:s.title)||i("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):w(W,{children:["New ",(e==null?void 0:e.title)||(e==null?void 0:e.name)]})}const cl=t=>!!t.showAsAction,ll=Qa(cl),Jo=c.memo(c.forwardRef((t,e)=>{let{rootElement:n}=t;const{onMenuAction:o,onPaneClose:a,onPaneSplit:r,validation:s,menuItems:u,menuItemGroups:l,schemaType:d,timelineStore:p,ready:h,views:y,unstable_languageFilter:g}=V(),{features:x}=pe(),{index:P,BackLink:C,hasGroupSiblings:_}=Te(),b=c.useMemo(()=>u.filter(ll),[u]),[E,m]=Pe.useState(!1),f=y.length>1,v=x.reviewChanges,O=U(p,R=>R.revTime),S=x.splitViews&&r&&y.length>1,I=S&&_,D=!I&&!x.backButton;return i(Je,{ref:e,loading:!h,title:i(sl,{}),tabs:f&&i(al,{}),backButton:x.backButton&&P>0&&i($,{as:C,"data-as":"a",icon:Za,mode:"bleed"}),subActions:v&&i(Yo,{chunk:O,mode:"rev",placement:"bottom-end"}),actions:w(vo,{space:1,children:[g.length>0&&i(W,{children:g.map((R,F)=>c.createElement(R,{key:"language-filter-".concat(F),schemaType:d}))}),s.length>0&&i(il,{boundaryElement:n,isOpen:E,setOpen:m},"validation-menu"),i(er,{itemGroups:l,items:b,onAction:o},"context-menu"),S&&i($,{icon:tr,mode:"bleed",onClick:r,title:"Split pane right"},"split-pane-button"),I&&i($,{icon:De,mode:"bleed",onClick:a,title:"Close split pane"},"close-view-button"),D&&i($,{icon:De,mode:"bleed",title:"Close pane group",as:C},"close-view-button")]})})}));Jo.displayName="DocumentPanelHeader";const ul=B(mo)(t=>{let{$disabled:e}=t;return e?{height:"100%"}:ue(Hn||(Hn=z([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),dl=function(e){const{footerHeight:n,isInspectOpen:o,rootElement:a,setDocumentPanelPortalElement:r}=e,{activeViewId:s,displayed:u,documentId:l,editState:d,value:p,views:h,ready:y,schemaType:g,permissions:x,isPermissionsLoading:P}=V(),{collapsed:C}=yo(),_=Ar(),{features:b}=pe(),[E,m]=c.useState(null),f=Qe(E),v=c.useRef(null),[O,S]=c.useState(null),I=p._createdAt?"update":"create",D=c.useMemo(()=>h.find(G=>G.id===s)||h[0]||{type:"form"},[s,h]),R=b.splitPanes&&v.current||_.element,F=c.useMemo(()=>C?[(f==null?void 0:f.height)||0,0,n?n+2:2,0]:[0,0,2,0],[C,n,f]),T=D.type!=="form",N=c.useMemo(()=>D.type==="component"&&D.component&&c.createElement(D.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:u||p,historical:u,published:(d==null?void 0:d.published)||null},documentId:l,options:D.options,schemaType:g}),[D,u,l,d==null?void 0:d.draft,d==null?void 0:d.published,g,p]);c.useEffect(()=>{O!=null&&O.scrollTo&&O.scrollTo(0,0)},[l,O]),c.useEffect(()=>{R&&r(R)},[R,r]);const Q=c.useMemo(()=>o?i(Gc,{value:u||p}):null,[o,u,p]);return w(L,{direction:"column",flex:2,overflow:C?void 0:"hidden",children:[i(Jo,{rootElement:a,ref:m}),i(ke,{children:i(zt,{element:R,__unstable_elements:{documentScrollElement:O},children:w(Bt,{element:O,children:[D.type==="form"&&!P&&y&&w(W,{children:[i(qc,{granted:!!(x!=null&&x.granted),requiredPermission:I}),i(Xo,{})]}),w(ul,{$disabled:C||!1,"data-testid":"document-panel-scroller",ref:S,children:[i(tl,{hidden:T,margins:F},l+(y?"_ready":"_pending")),N]}),Q,i("div",{"data-testid":"document-panel-portal",ref:v})]})})})]})},Qo=["left","bottom"],pl={small:0,medium:1,large:2,full:"auto"};function hl(t){const{dialog:e,referenceElement:n}=t;return i(Lt,{content:i(fl,{dialog:e}),fallbackPlacements:Qo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function fl(t){const{dialog:e}=t,{cancelButtonIcon:n,cancelButtonText:o,confirmButtonIcon:a,confirmButtonText:r,message:s,onCancel:u,onConfirm:l,tone:d}=e,{isTopLayer:p}=jo(),[h,y]=c.useState(null),g=c.useCallback(()=>{p&&u()},[p,u]),x=c.useCallback(P=>{P.key==="Escape"&&p&&u()},[p,u]);return Wt(g,[h]),Vt(x),w(L,{direction:"column",ref:y,style:{minWidth:320-16,maxWidth:400},children:[i(k,{flex:1,overflow:"auto",padding:4,children:i(j,{children:s})}),i(k,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:w(bi,{columns:2,gap:2,children:[i($,{icon:n,onClick:u,mode:"ghost",text:o||"Cancel"}),i($,{icon:a,onClick:l,text:r||"Confirm",tone:d})]})})]})}function ml(t){const{dialog:e}=t,n=c.useId(),o=e.footer&&i(k,{paddingX:4,paddingY:3,children:e.footer});return i(Ut,{zOffset:"fullscreen",children:i(Ht,{__unstable_hideCloseButton:e.showCloseButton===!1,footer:o,header:e.header,id:n,onClose:e.onClose,onClickOutside:e.onClose,width:e.width===void 0?1:pl[e.width],portal:"documentPanelPortalElement",children:i(k,{padding:4,children:e.content})})})}function gl(t){const{dialog:e,referenceElement:n}=t;return i(Lt,{content:i(vl,{dialog:e}),fallbackPlacements:Qo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:n})}function vl(t){const{dialog:e}=t,{content:n,onClose:o}=e,{isTopLayer:a}=jo(),[r,s]=c.useState(null),u=c.useCallback(()=>{a&&o()},[a,o]),l=c.useCallback(d=>{d.key==="Escape"&&a&&o()},[a,o]);return Wt(u,[r]),Vt(l),i("div",{ref:s,children:n})}function Kt(t){const{dialog:e,referenceElement:n=null}=t,o=c.useId();if(e.type==="confirm")return i(hl,{dialog:e,referenceElement:n});if(e.type==="popover")return i(gl,{dialog:e,referenceElement:n});if(e.type==="dialog"||!e.type)return i(ml,{dialog:e});const a=e;return console.warn("Unsupported modal type ".concat(a.type)),i(Ht,{id:o,onClose:a.onClose,onClickOutside:a.onClose,width:2,children:i(k,{padding:4,children:a.content||w(W,{children:["Unexpected modal type (",i("code",{children:a.type}),")"]})})})}function bl(t){const{actionStates:e,disabled:n}=t,o=c.useId(),a=c.useRef(null),[r,s]=c.useState(-1),[u,l]=c.useState(null),d=c.useCallback(y=>{s(y)},[]),p=c.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),h=e[r];return w(W,{children:[i(Oo,{id:"".concat(o,"-action-menu"),button:i($,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:n,icon:li,mode:"ghost",ref:a}),menu:i(Do,{padding:1,children:e.map((y,g)=>i(yl,{actionState:y,disabled:n,index:g,onAction:d},g))}),popover:p,ref:l}),h&&h.dialog&&i(Ut,{zOffset:"paneFooter",children:i(Kt,{dialog:h.dialog,referenceElement:u})})]})}function yl(t){const{actionState:e,disabled:n,index:o,onAction:a}=t,{onHandle:r}=e,s=c.useCallback(()=>{a(o),r&&r()},[o,a,r]),u=e.title&&i(k,{padding:2,children:i(j,{size:1,children:e.title})});return i(ui,{"data-testid":"action-".concat(e.label.replace(" ","")),disabled:n||!!e.disabled,onClick:s,padding:0,tone:e.tone,children:i(Ne,{content:u,disabled:!u,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:w(L,{align:"center",paddingX:3,children:[w(L,{flex:1,paddingY:3,children:[e.icon&&i(k,{marginRight:3,children:w(j,{children:[c.isValidElement(e.icon)&&e.icon,di.isValidElementType(e.icon)&&c.createElement(e.icon)]})}),i(j,{children:e.label})]}),e.shortcut&&i(k,{marginLeft:3,children:i(Mo,{keys:String(e.shortcut).split("+").map(l=>l.slice(0,1).toUpperCase()+l.slice(1))})})]})})})}function Zo(t){const{disabled:e,showMenu:n,states:o}=t,[a,...r]=o,[s,u]=c.useState(null),l=c.useMemo(()=>!a||!a.title&&!a.shortcut?null:w(L,{padding:2,style:{maxWidth:300},align:"center",children:[i(j,{size:1,children:a.title}),a.shortcut&&i(k,{marginLeft:a.title?2:0,children:i(Mo,{keys:String(a.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[a]);return w(L,{children:[a&&i(Nr,{zOffset:200,children:i(Ne,{disabled:!l,content:l,portal:!0,placement:"top",children:i(oe,{flex:1,children:i($,{"data-testid":"action-".concat(a.label),disabled:e||!!a.disabled,icon:a.icon,onClick:a.onHandle,ref:u,text:a.label,tone:a.tone||"primary"})})})}),n&&r.length>0&&i(k,{marginLeft:1,children:i(bl,{actionStates:r,disabled:e})}),a&&a.dialog&&i(Kt,{dialog:a.dialog,referenceElement:s})]})}const _l=c.memo(function(){const{actions:e,connectionState:n,documentId:o,editState:a}=V();return!e||!a?null:i(Yt,{actions:e,actionProps:a,children:r=>{let{states:s}=r;return i(Zo,{disabled:n!=="connected",showMenu:e.length>1,states:s},o)}})}),xl=c.memo(function(){const{connectionState:e,editState:n,timelineStore:o}=V(),a=U(o,d=>d.revTime),r=(a==null?void 0:a.id)||"",s=((n==null?void 0:n.draft)||(n==null?void 0:n.published)||{})._rev===r,u=c.useMemo(()=>({...n||{},revision:r}),[n,r]),l=c.useMemo(()=>[nr],[]);return i(Yt,{actions:l,actionProps:u,children:d=>{let{states:p}=d;return i(Zo,{disabled:e!=="connected"||!!s,showMenu:!1,states:p})}})}),Pl={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function Sl(t){let{states:e}=t;return i(vo,{space:1,children:e.map((n,o)=>i(Ne,{content:n.title&&i(k,{padding:2,children:i(j,{size:1,children:n.title})}),disabled:!n.title,placement:"top",portal:!0,children:i(pi,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:n.color?Pl[n.color]:void 0,style:{whiteSpace:"nowrap"},children:n.label})},String(o)))})}function El(){const{badges:t,editState:e}=V();return!e||!t?null:i(ks,{badges:t,badgeProps:e,children:n=>{let{states:o}=n;return i(Sl,{states:o})}})}const wl=B(L)($n||($n=z([`
  cursor: default;
`])));function Cl(t){const{collapsed:e,disabled:n,lastPublished:o,lastUpdated:a,liveEdit:r}=t,s=xe(o||"",{minimal:!0,agoSuffix:!0}),u=xe(o||"",{minimal:!0}),l=xe(a||"",{minimal:!0,agoSuffix:!0}),d=xe(a||"",{minimal:!0});return i(wl,{align:"center","data-ui":"SessionLayout",sizing:"border",children:i(Ne,{placement:"top",portal:!0,content:i(oe,{padding:3,space:3,children:i(j,{size:1,muted:!0,children:r?w(W,{children:["Last updated ",a?l:s]}):w(W,{children:["Last published ",s]})})}),children:i($,{mode:"bleed",tone:r?"critical":"positive",tabIndex:-1,disabled:n,children:w(L,{align:"center",children:[i(k,{marginRight:e?0:3,children:i(j,{size:2,children:r?i(Lr,{}):i(ko,{})})}),!e&&i(j,{size:1,weight:"medium",children:r?i(W,{children:a?d:u}):u})]})})})})}const Il=B(Ae.path)(Gn||(Gn=z([`
  transform-origin: center;
`]))),Ol=t=>i(Ae.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Dl=t=>i(Il,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),Ml=t=>i(Ae.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),kl=t=>i(Ae.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),Rl=or(Yn||(Yn=z([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Tl=B.g(Kn||(Kn=z([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),Rl),jl={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},Al={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},Nl={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},Ll={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},Fl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function zl(t){const{status:e}=t;return e?i("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:w(Ae.g,{variants:jl,initial:e,animate:e,children:[w(Tl,{"data-rotate":e==="changes"?void 0:"",children:[i(Dl,{variants:Nl,initial:e,animate:e}),i(Ol,{variants:Al,initial:e,animate:e})]}),i(Ml,{variants:Ll,initial:e,animate:e}),i(kl,{variants:Fl,initial:e,animate:e})]})}):null}const Bl=Pe.forwardRef(function(e,n){const{collapsed:o,status:a,lastUpdated:r,...s}=e,u=xe(r||"",{minimal:!0}),l=xe(r||"",{minimal:!0,agoSuffix:!0}),d=c.useMemo(()=>a==="syncing"?{text:"Saving...",tone:void 0}:a==="changes"?{text:u,tone:"caution"}:a==="saved"?{text:"Saved!",tone:"positive"}:{},[a,u]);return a?i(Ne,{placement:"top",portal:!0,disabled:a!=="changes",content:w(oe,{padding:3,space:3,children:[i(j,{size:1,weight:"semibold",children:"Review changes"}),w(j,{size:1,muted:!0,children:["Changes saved ",l]})]}),children:i($,{mode:"bleed",justify:"flex-start",tone:d==null?void 0:d.tone,...s,"data-testid":"review-changes-button",ref:n,children:w(L,{align:"center",children:[i(k,{marginRight:o?0:3,children:i(j,{children:i(zl,{status:a})})}),!o&&i(j,{size:1,weight:"medium",children:d==null?void 0:d.text})]})})}):null}),Wl=Pe.memo(Bl),Vl=1e3,Ul=3e3,Hl=c.memo(function(){var e;const{changesOpen:n,documentId:o,documentType:a,editState:r,onHistoryClose:s,onHistoryOpen:u,timelineStore:l,value:d}=V(),p=ar(o,a),h=d==null?void 0:d._updatedAt,y=(e=r==null?void 0:r.published)==null?void 0:e._updatedAt,g=!!(r!=null&&r.liveEdit),x=!!(r!=null&&r.published),P=!!(r!=null&&r.draft),[C,_]=c.useState(null),b=Qe(C),E=!b||(b==null?void 0:b.width)<300,[m,f]=c.useState(null),v=U(l,I=>I.onOlderRevision);c.useEffect(()=>{if(m==="syncing"&&!p.isSyncing){const I=setTimeout(()=>f("saved"),Vl);return()=>clearTimeout(I)}if(m==="saved"){const I=setTimeout(()=>f(null),Ul);return()=>clearTimeout(I)}},[m,h,p.isSyncing]),c.useLayoutEffect(()=>{f(null)},[o]),c.useLayoutEffect(()=>{p.isSyncing&&f("syncing")},[p.isSyncing,h]);const O=c.useMemo(()=>i(Wl,{lastUpdated:h,status:m||(P?"changes":void 0),onClick:n?s:u,disabled:v,selected:n,collapsed:E}),[P,n,s,u,h,v,m,E]),S=c.useMemo(()=>(g||x)&&i(k,{marginRight:1,children:i(Cl,{disabled:v,lastPublished:y,lastUpdated:h,liveEdit:g,collapsed:E})}),[E,y,h,g,x,v]);return w(L,{align:"center","data-ui":"DocumentSparkline",ref:_,children:[S,w(L,{align:"center",flex:1,children:[O,!E&&i(k,{marginLeft:3,children:i(El,{})})]})]})}),$l=B(k)(qn||(qn=z([`
  min-width: 10em;
  max-width: 16em;
`])));function Gl(t){const{actionsBoxRef:e}=t,{badges:n,timelineStore:o}=V(),a=U(o,r=>r.onOlderRevision);return c.useMemo(()=>i(k,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:w(L,{align:"center",children:[i(k,{flex:[1,2],children:n&&i(Hl,{})}),i($l,{flex:1,marginLeft:[1,3],ref:e,children:a?i(xl,{}):i(_l,{})})]})}),[e,n,a])}function Yl(t){const{actionsBoxElement:e,activeIndex:n,children:o,id:a,onActionStart:r,onKeyDown:s,rootRef:u,states:l,...d}=t,p=l[n],h=c.useCallback(y=>{const g=l.filter(P=>P.shortcut&&Nt(P.shortcut,y)),x=g[0];if(g.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(x.shortcut,'"')),x&&!x.disabled&&x.onHandle){y.preventDefault(),x.onHandle(),r(l.indexOf(x));return}s&&s(y)},[r,s,l]);return w(qe,{id:a,onKeyDown:h,tabIndex:-1,...d,ref:u,children:[o,p&&p.dialog&&i(Ut,{zOffset:"paneFooter",children:i(Kt,{dialog:p.dialog,referenceElement:e})})]})}const ea=Pe.memo(t=>{const{actionsBoxElement:e,children:n,...o}=t,{actions:a,editState:r}=V(),[s,u]=c.useState(-1),l=c.useCallback(p=>{u(p)},[]),d=c.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!d||!a?null:i(Yt,{actionProps:d,actions:a,children:p=>{let{states:h}=p;return i(Yl,{...o,activeIndex:s,actionsBoxElement:e,onActionStart:l,states:h,children:n})}})});ea.displayName="DocumentActionShortcuts";const ro=320,io=600,so=320,co=["fixed","absolute"],Kl=B(rr)(Xn||(Xn=z([`
  flex: 1;
  display: flex;
  min-height: 0;
  min-width: 0;
`]))),ru=c.memo(function(e){const{name:n}=Xe();return i(bo,{name:e.pane.source||n,children:i(ql,{...e})})});function ql(t){var e;const{pane:n,paneKey:o}=t,{resolveNewDocumentOptions:a}=Xe().document,r=Te(),s=Xl(n.options,r.params),{documentType:u,isLoaded:l}=ir(s.id,s.type),d=c.useMemo(()=>a({type:"global"}),[a]),[p,h]=sr({templateItems:d}),y=l&&!h,g=c.useMemo(()=>y&&u&&s.type!==u?Jl(t,s,u):t,[t,u,y,s]),{ReferenceChildLink:x,handleEditReference:P,groupIndex:C,routerPanesState:_}=r,b=((e=_[C+1])==null?void 0:e[0].params)||{},E=_.length,{parentRefPath:m}=b,f=c.useMemo(()=>m?{path:Oe(m),state:C>=E-1?"none":C>=E-2?"selected":"pressed"}:{path:[],state:"none"},[m,C,E]);return s.type==="*"&&!y?i(Me,{flex:2.5,minWidth:320,paneKey:o,title:"Loading document…"}):u?i($o,{...g,children:i(cr,{EditReferenceLinkComponent:x,onEditReference:P,initialValueTemplateItems:p,activePath:f,children:i(Ql,{})})},u):i(Ho,{flex:2.5,minWidth:320,paneKey:o,title:i(W,{children:"The document was not found"}),children:i(oe,{space:4,children:w(j,{as:"p",children:["The document type is not defined, and a document with the ",i("code",{children:s.id})," ","identifier could not be found."]})})})}function Xl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=fo();return c.useMemo(()=>{if(t.type&&t.type!=="*")return t;const o=t.template||e.template,a=o?n.find(s=>s.id===o):void 0,r=a==null?void 0:a.schemaType;return r?{...t,type:r}:t},[t,e.template,n])}function Jl(t,e,n){return{...t,pane:{...t.pane,options:{...e,type:n}}}}function Ql(){const{changesOpen:t,documentType:e,onFocus:n,onPathOpen:o,onHistoryOpen:a,onKeyUp:r,inspectOpen:s,paneKey:u,schemaType:l,value:d}=V(),{features:p}=pe(),{collapsed:h}=yo(),y=lr(),[g,x]=c.useState(null),[P,C]=c.useState(null),[_,b]=c.useState(null),[E,m]=c.useState(null),f=Qe(P),v=f==null?void 0:f.height,O=c.useMemo(()=>i(dl,{footerHeight:v||null,isInspectOpen:s,rootElement:g,setDocumentPanelPortalElement:m}),[v,g,s]),S=c.useMemo(()=>i(zt,{__unstable_elements:{documentPanelPortalElement:E},children:i(mn,{position:co,zOffset:y.portal,children:i(ur,{ref:C,children:i(Gl,{actionsBoxRef:b})})})}),[E,y.portal]),I=c.useMemo(()=>!p.reviewChanges||!t?null:i(Bt,{element:g,children:i(Lc,{})}),[t,p.reviewChanges,g]),D=c.useCallback(N=>{o(N),n(N)},[o,n]),R=c.useMemo(()=>l?w(W,{children:[i(mn,{position:co,zOffset:y.portal,children:i(L,{direction:"column",flex:1,height:h?void 0:"fill",children:w(Kl,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:a,onSetFocus:D,children:[O,I]})})}),S,i(uc,{})]}):i(Ho,{flex:2.5,minWidth:320,paneKey:u,title:w(W,{children:["Unknown document type: ",i("code",{children:e})]}),tone:"caution",children:w(oe,{space:4,children:[e&&w(j,{as:"p",children:["This document has the schema type ",i("code",{children:e}),", which is not defined as a type in the local content studio schema."]}),!e&&i(j,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),dr]})}),[l,y.portal,h,t,a,D,O,I,S,u,e,d]),F=t?io+so:io,T=t?ro+so:ro;return i(ea,{actionsBoxElement:_,currentMinWidth:F,"data-testid":"document-pane",flex:2.5,id:u,minWidth:T,onKeyUp:r,rootRef:x,children:R})}function Zl(){return i(ce,{height:"fill",children:i(L,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:i(je,{width:0,children:i(ce,{padding:4,radius:2,shadow:1,tone:"caution",children:w(L,{children:[i(k,{children:i(j,{size:1,children:i(Ft,{})})}),w(oe,{flex:1,marginLeft:3,space:3,children:[i(j,{as:"h1",size:1,weight:"bold",children:"No document types"}),i(j,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),i(j,{as:"p",muted:!0,size:1,children:i("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const eu=B(Fs)(Jn||(Jn=z([`
  min-height: 100%;
  min-width: 320px;
`]))),tu=Nt("mod+s"),nu=c.memo(function(e){let{onPaneChange:n}=e;var o;const{push:a}=Re(),r=ho(),{layoutCollapsed:s,setLayoutCollapsed:u}=pe(),{paneDataItems:l,resolvedPanes:d}=Ks(),p=jt(c.useCallback(C=>typeof C.intent=="string",[])),[h,y]=c.useState(null),g=c.useCallback(()=>u(!0),[u]),x=c.useCallback(()=>u(!1),[u]);return c.useEffect(()=>{d.length&&n(d)},[n,d]),c.useEffect(()=>{const C=_=>{tu(_)&&(_.preventDefault(),a({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[a]),((o=r._original)==null?void 0:o.types.some(pr))?w(zt,{element:h||null,children:[w(eu,{flex:1,height:s?void 0:"fill",minWidth:512,onCollapse:g,onExpand:x,children:[l.map(C=>{let{active:_,childItemId:b,groupIndex:E,itemId:m,key:f,pane:v,index:O,params:S,path:I,payload:D,siblingIndex:R,selected:F}=C;return i(c.Fragment,{children:v===Et?i(Me,{paneKey:f,path:I,selected:F}):i(ic,{active:_,groupIndex:E,index:O,pane:v,childItemId:b,itemId:m,paneKey:f,params:S,payload:D,path:I,selected:F,siblingIndex:R})},"".concat(v===Et?"loading":v.type,"-").concat(O))}),l.length<=1&&p&&i(Me,{paneKey:"intent-resolver"})]}),i("div",{"data-portal":"",ref:y})]}):i(Zl,{})});function ou(t){let{tool:{options:e}}=t;const{unstable_sources:n}=Fr(),[o]=n,{source:a,defaultDocumentNode:r,structure:s}=e||{};c.useEffect(()=>(ft([]),()=>ft([])),[]);const[{error:u},l]=c.useState({error:null});return u?i(ec,{error:u}):i(zr,{onCatch:l,children:i(bo,{name:a||o.name,children:w(Br,{defaultDocumentNode:r,structure:s,children:[i(nu,{onPaneChange:ft}),i(Js,{})]})})})}var iu=Object.freeze({__proto__:null,default:ou});export{Wo as Delay,ru as DocumentPane,$o as DocumentPaneProvider,iu as index,pe as useDeskTool,zc as useDeskToolSetting};
